(function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};jQuery.fn.extend({imagepicker:function(b){return null==b&&(b={}),this.each(function(){var c;return c=jQuery(this),c.data("picker")&&c.data("picker").destroy(),c.data("picker",new a(this,d(b))),null!=b.initialized?b.initialized.call(c.data("picker")):void 0})}}),d=function(a){var b;return b={hide_select:!0,show_label:!1,initialized:void 0,changed:void 0,clicked:void 0,selected:void 0,limit:void 0,limit_reached:void 0},jQuery.extend(b,a)},c=function(a,b){return 0===jQuery(a).not(b).length&&0===jQuery(b).not(a).length},a=function(){function a(a,b){this.opts=null!=b?b:{},this.sync_picker_with_select=e(this.sync_picker_with_select,this),this.select=jQuery(a),this.multiple="multiple"===this.select.attr("multiple"),null!=this.select.data("limit")&&(this.opts.limit=parseInt(this.select.data("limit"))),this.build_and_append_picker()}return a.prototype.destroy=function(){var a,b,c,d;for(d=this.picker_options,b=0,c=d.length;c>b;b++)a=d[b],a.destroy();return this.picker.remove(),this.select.unbind("change"),this.select.removeData("picker"),this.select.show()},a.prototype.build_and_append_picker=function(){var a=this;return this.opts.hide_select&&this.select.hide(),this.select.change(function(){return a.sync_picker_with_select()}),null!=this.picker&&this.picker.remove(),this.create_picker(),this.select.after(this.picker),this.sync_picker_with_select()},a.prototype.sync_picker_with_select=function(){var a,b,c,d,e;for(d=this.picker_options,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.is_selected()?e.push(a.mark_as_selected()):e.push(a.unmark_as_selected());return e},a.prototype.create_picker=function(){return this.picker=jQuery("<ul class='thumbnails image_picker_selector'></ul>"),this.picker_options=[],this.recursively_parse_option_groups(this.select,this.picker),this.picker},a.prototype.recursively_parse_option_groups=function(a,c){var d,e,f,g,h,i,j,k,l,m;for(k=a.children("optgroup"),g=0,i=k.length;i>g;g++)f=k[g],f=jQuery(f),d=jQuery("<ul></ul>"),d.append(jQuery("<li class='group_title'>"+f.attr("label")+"</li>")),c.append(jQuery("<li>").append(d)),this.recursively_parse_option_groups(f,d);for(l=function(){var c,d,f,g;for(f=a.children("option"),g=[],c=0,d=f.length;d>c;c++)e=f[c],g.push(new b(e,this,this.opts));return g}.call(this),m=[],h=0,j=l.length;j>h;h++)e=l[h],this.picker_options.push(e),e.has_image()&&m.push(c.append(e.node));return m},a.prototype.has_implicit_blanks=function(){var a;return function(){var b,c,d,e;for(d=this.picker_options,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.is_blank()&&!a.has_image()&&e.push(a);return e}.call(this).length>0},a.prototype.selected_values=function(){return this.multiple?this.select.val()||[]:[this.select.val()]},a.prototype.toggle=function(a){var b,d,e;return d=this.selected_values(),e=a.value().toString(),this.multiple?f.call(this.selected_values(),e)>=0?(b=this.selected_values(),b.splice(jQuery.inArray(e,d),1),this.select.val([]),this.select.val(b)):null!=this.opts.limit&&this.selected_values().length>=this.opts.limit?null!=this.opts.limit_reached&&this.opts.limit_reached.call(this.select):this.select.val(this.selected_values().concat(e)):this.has_implicit_blanks()&&a.is_selected()?this.select.val(""):this.select.val(e),c(d,this.selected_values())||(this.select.change(),null==this.opts.changed)?void 0:this.opts.changed.call(this.select,d,this.selected_values())},a}(),b=function(){function a(a,b,c){this.picker=b,this.opts=null!=c?c:{},this.clicked=e(this.clicked,this),this.option=jQuery(a),this.create_node()}return a.prototype.destroy=function(){return this.node.find(".thumbnail").unbind()},a.prototype.has_image=function(){return null!=this.option.data("img-src")},a.prototype.is_blank=function(){return!(null!=this.value()&&""!==this.value())},a.prototype.is_selected=function(){var a;return a=this.picker.select.val(),this.picker.multiple?jQuery.inArray(this.value(),a)>=0:this.value()===a},a.prototype.mark_as_selected=function(){return this.node.find(".thumbnail").addClass("selected")},a.prototype.unmark_as_selected=function(){return this.node.find(".thumbnail").removeClass("selected")},a.prototype.value=function(){return this.option.val()},a.prototype.label=function(){return this.option.data("img-label")?this.option.data("img-label"):this.option.text()},a.prototype.clicked=function(){return this.picker.toggle(this),null!=this.opts.clicked&&this.opts.clicked.call(this.picker.select,this),null!=this.opts.selected&&this.is_selected()?this.opts.selected.call(this.picker.select,this):void 0},a.prototype.create_node=function(){var a,b;return this.node=jQuery("<li/>"),a=jQuery("<img class='image_picker_image'/>"),a.attr("src",this.option.data("img-src")),b=jQuery("<div class='thumbnail'>"),b.click({option:this},function(a){return a.data.option.clicked()}),b.append(a),this.opts.show_label&&b.append(jQuery("<p/>").html(this.label())),this.node.append(b),this.node},a}()}).call(this),angular.module("config",[]).constant("api_host","http://dev-winwins.net").value("debug",!0),angular.module("winwinsApp",["ngAnimate","ngCookies","ngResource","ngMessages","ngFileUpload","ngSanitize","ngTouch","ngTagsInput","ui.router","ui.select","satellizer","config","infinite-scroll","zumba.angular-waypoints","oitozero.ngSweetAlert","pascalprecht.translate","headroom","720kb.socialshare","truncate","angular-loading-bar","frapontillo.bootstrap-switch","tmh.dynamicLocale"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(a,b,c){function d(a,b,c,d){var e=a.defer();return c.isAuthenticated()?e.resolve():(console.dir(d),b.path("/signin")),e.promise}c.otherwise("/"),b.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("signUp",{url:"/signup",templateUrl:"views/signup.html",controller:"SignUpCtrl"}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl"}).state("profile",{url:"/profile",templateUrl:"views/user/profile.html",controller:"ProfileCtrl"}).state("profile_notificaciones",{url:"/notificaciones",templateUrl:"views/user/user_notificaciones.html",controller:"ProfileNotificaciones"}).state("account",{url:"/account",templateUrl:"views/user/account.html",controller:"MainCtrl"}).state("winwin",{url:"/winwin",templateUrl:"views/winwin.html",controller:"WinwinCtrl"}).state("winwin-new",{url:"/winwin-new",templateUrl:"views/winwin/edit.html",controller:"winwin-edit",resolve:{loginRequired:d}}).state("winwin-first-post",{url:"/winwin-first-post/:winwinId",templateUrl:"views/winwin/first_post.html",controller:"winwin-first-post"}).state("winwin-promote",{url:"/winwin-promote/:winwinId",templateUrl:"views/winwin/promote.html",controller:"winwin-promote"}).state("winwin-list",{url:"/winwin-list",templateUrl:"views/winwin/list.html",controller:"winwin-list"}).state("winwin-search",{url:"/winwin-search",templateUrl:"views/winwin/search.html",controller:"winwin-search"}).state("winwin-view",{url:"/winwin-view/:winwinId",templateUrl:"views/winwin-tabs/view.html",controller:"winwin-tabs"}).state("_winwin-view",{url:"/winwin-view/:winwinId",templateUrl:"views/winwin-view/ww-winwin.html",controller:"winwin-view"}).state("winwin-muro",{templateUrl:"views/winwin-view/ww-wall.html",url:"/winwin-view/:winwinId",controller:"winwin-muro"}).state("winwin-members",{templateUrl:"views/winwin-view/ww-users.html",url:"/winwin-view/:winwinId",controller:"winwin-members"}).state("winwin-sponsors",{templateUrl:"views/winwin-view/ww-sponsors.html",url:"/winwin-view/:winwinId",controller:"winwin-sponsors"}).state("admin_campanada",{templateUrl:"views/winwin-view/ww-campanada.html",url:"/winwin-view/:winwinId",controller:"winwin-campanada"}).state("winwin-view.admin_configuracion",{templateUrl:"views/winwin/admin_configuracion.html",controller:"winwin-configuracion"}).state("winwin-view.admin_patrocinio",{templateUrl:"views/winwin/admin_solicitud_patrocinio.html",controller:"winwin-patrocinio"}).state("winwin-view.admin_miembros",{templateUrl:"views/winwin/admin_participantes.html",controller:"winwin-miembros"}).state("winwin-view.winwin-sponsor-request",{templateUrl:"views/winwin/admin_solicitud_patrocinio.html",controller:"winwin-sponsor-request"}).state("createWW",{url:"/createww",templateUrl:"views/createWW.html",controller:"CreateWWCtrl"}).state("createWWid",{url:"/createwwid",templateUrl:"views/createWWid.html",controller:"CreateWWCtrl"}).state("signIn",{url:"/signin",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("success-login",{url:"/success-login",templateUrl:"views/login_success.html",controller:"SuccessLogin"}).state("failure-login",{url:"/fail-login",templateUrl:"views/login_failure.html",controller:"FailureLogin"}).state("activateWW",{url:"/activate",templateUrl:"views/activateWW.html",controller:"ActivateWWCtrl"}).state("promote",{url:"/promote",templateUrl:"views/promote.html",controller:"ActivateWWCtrl"}).state("members",{url:"/members",templateUrl:"views/members.html",controller:"MembersCtrl"}).state("comments",{url:"/comments",templateUrl:"views/comments.html",controller:"WinwinCtrl"}).state("group-view",{url:"/group-view/:groupId",templateUrl:"views/group/view.html",controller:"group-view"}).state("group-new",{url:"/group-new",templateUrl:"views/group/edit.html",controller:"group-edit"}).state("group-promote",{url:"/group-promote/:groupId",templateUrl:"views/group/promote.html",controller:"group-promote"}).state("group-list",{url:"/group-list",templateUrl:"views/group/list.html",controller:"group-list"}).state("user-view",{url:"/user-view/:userId",templateUrl:"views/user/profile.html",controller:"user-view"}).state("user-list",{url:"/user-list",templateUrl:"views/user/list.html",controller:"user-list"}).state("sponsor-view",{url:"/sponsor-view/:sponsorId",templateUrl:"views/sponsor/view.html",controller:"sponsor-view"}).state("search-list",{url:"/search/:query",templateUrl:"views/search/list.html",controller:"search-list"}).state("sponsor-list",{url:"/sponsor-list",templateUrl:"views/sponsor/list.html",controller:"sponsor-list"}).state("terms",{url:"/site/terms",templateUrl:"views/site/terms.html"}).state("contact",{url:"/site/contact",templateUrl:"views/site/contact.html",controller:"contact-controller"}).state("how",{url:"/site/how",templateUrl:"views/site/how.html"}).state("about",{url:"/site/about",templateUrl:"views/site/about.html"}),d.$inject=["$q","$location","$auth","$state"]}]).config(["$authProvider","api_host",function(a,b){a.baseUrl=b+"/",a.httpInterceptor=!0,a.facebook({clientId:"1082199191794840",scope:"email,public_profile"}),a.google({clientId:"313110710680-p22p1s5brqn7tfaqj9v16u67bic5smqk.apps.googleusercontent.com"}),a.yahoo({clientId:"dj0yJmk9SDVkM2RhNWJSc2ZBJmQ9WVdrOWIzVlFRMWxzTXpZbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD0yYw--"}),a.twitter({url:"/auth/twitter"})}]).config(["$translateProvider","tmhDynamicLocaleProvider",function(a,b){a.useMissingTranslationHandlerLog(),a.useStaticFilesLoader({prefix:"resources/locale-",suffix:".json"}),a.preferredLanguage("es_ES"),a.useLocalStorage(),b.localeLocationPattern("bower_components/angular-i18n/angular-locale_{{locale}}.js")}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).constant("LOCALES",{locales:{es_ES:"Espa침ol",en_US:"English"},preferredLocale:"es_ES"}).controller("Ctrl",["$scope","$location","$window",function(a,b,c){a.$on("$locationChangeStart",function(c,d,e){a.startPath=b.path(),a.startNewUrl=d,a.startOldUrl=e}),a.$on("$locationChangeSuccess",function(c,d,e){a.successPath=b.path(),a.successNewUrl=d,a.successOldUrl=e}),a.back=function(){c.history.back()},a.forward=function(){c.history.forward()}}]).directive("dynamicBackground",[function(){return{restrict:"A",link:function(a,b,c){a.setBg=function(){angular.element(b[0]).css({"background-color":c.backgroundColor,"background-repeat":c.backgroundRepeat,"background-position":c.backgroundPosition,"background-attachment":c.backgroundAttachment,"background-origin":c.backgroundOrigin,"background-clip":c.backgroundClip,background:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url("+c.backgroundImage+")","background-size":"cover"})},a.launchDynamicBg=function(){c.backgroundOnEvent?angular.element(b[0]).bind(c.backgroundOnEvent,function(){a.setBg()}):a.setBg()},angular.forEach(["backgroundImage","backgroundColor","backgroundSize","backgroundPosition","backgroundClip","backgroundAttachment","backgroundOnEvent","backgroundRepeat","backgroundOrigin","background"],function(b){c.$observe(b,function(b){b&&a.launchDynamicBg()})})}}}]),angular.module("winwinsApp").controller("MainCtrl",["$scope","$auth","$http","$state","Winwin","api_host",function(a,b,c,d,e,f){a.winwins=[],e.query(function(b){a.winwins=b}),a.isAuthenticated=function(){return b.isAuthenticated()},a.goControlPanel=function(){d.go("account")},a.join=function(e){b.isAuthenticated()?c.get(f+"/api/winwins/join/"+e).success(function(b){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0},function(){a.view(e)})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):d.go("signIn")},a.view=function(a){console.log("view "+a),d.go("winwin-view",{winwinId:a})},a.openShare=function(a){$("#socialModal").modal("show"),console.log("winwin_id: "+a)}}]).controller("contact-controller",["$scope","$auth","$http","$state","api_host",function(a,b,c,d,e){}]),angular.module("winwinsApp").controller("SignUpCtrl",["$scope","$auth","SweetAlert",function(a,b,c){a.signup=function(){b.signup({username:a.name,email:a.email,password:a.password,birthdate:a.birthdate,name:a.name,lastname:a.lastname,language_code:"ES"})["catch"](function(a){c.swal(a.data.message,"try_again","warning",function(){$state.go("signup")})})},a.authenticate=function(a){b.authenticate(a).then(function(){$rootScope.currentUser=data,c.swal("success_title","success_subtitle","success",function(){$state.go("main")})})["catch"](function(a){$state.go("failure-login"),c.swal(a.data.message,"try_again","warning",function(){$state.go("signup")})})}}]),angular.module("winwinsApp").controller("winwin-tabs",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$auth","Winwin","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.is_admin=!1,a.current_view="home",a.setCurrentView=function(b){a.current_view=b,a.is_admin=!1},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){console.log("is admin? "+a.isAdmin),a.isAdmin&&(a.is_admin=!0)},a.isAdmin=!1,a.winwin_view=!0,a.show_closing_date=!1,a.show_description=!1,a.show_details=function(b){a.show_description=b},a.posts=[],a.last={},a.getPosts=function(){b.get(k+"/api/posts/winwin/"+d.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last})},a.winwin={},a.getWinwin=function(){a.winwin=i.get({id:d.winwinId},function(b){a.winwin=b,a.calculate_time(),a.winwin.is_moderator&&(a.isAdmin=!0)})},a.isSponsor=!1,j.getProfile().success(function(b){b&&(a.account=b.account,a.profile=b.profile,a.isSponsor=b.sponsor)}),a.duration_days=0,a.duration_hours=0,a.duration_minutes=0,a.calculate_time=function(){var b=moment(),c=moment(a.winwin.closing_date);if(a.show_closing_date=!1,a.winwin.closing_date&&c.isAfter(b)){a.duration_days=c.diff(b,"days"),console.log(a.duration_days),a.duration_hours=c.diff(b.add(a.duration_days,"days"),"hours"),console.log(a.duration_hours);var d=c.diff(b.add(a.duration_days,"days").add(a.duration_hours,"hours"),"minutes");a.duration_minutes=0>d?0:d,console.log(a.duration_minutes),a.show_closing_date=!0}},a.getWinwin(),a.viewProfile=function(a){console.log("User id: "+a),c.go("user-view",{userId:a})},a.join=function(){h.isAuthenticated()?b.get(k+"/api/winwins/join/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):c.go("signIn")},a.pass=function(){c.go("winwin-list")},a.left=function(){b.get(k+"/api/winwins/left/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_left",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-navbar",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$auth","Winwin","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.isAdmin=!0,a.winwin.is_moderator&&(a.isAdmin=!0),a.goMuro=function(){a.current_subview="muro",a.isAdmin=!1,e(function(){c.go("winwin-muro",{winwinId:a.winwin.id})},500)},a.goMembers=function(){console.log("SCope winwin: "+a.winwin.id),c.go("winwin-members",{winwinId:a.winwin.id})},a.goSponsors=function(){a.current_subview="sponsors",a.isAdmin=!1,console.log("SCope winwin: "+a.winwin.id),c.go("winwin-sponsors",{winwinId:a.winwin.id})},a.goWinwin=function(){window.scrollTo(0,0),a.isAdmin=!1,a.first_view=!1,g.hash("winwin-top"),f()},a.goAdmin=function(){a.winwin.is_moderator?(a.isAdmin=!0,console.dir(a.profile)):swal({title:"warning",text:"not_is_a_moderator",type:"warning",showcancelbutton:!1,closeonconfirm:!0})},a.goPatrocinio=function(){a.current_subadmin="patrocinio",c.go("winwin-view.admin_patrocinio",{winwinId:a.winwin.id})},a.goRequestPatrocinio=function(){a.current_subview="sponsor",c.go("winwin-view.winwin-sponsor-request",{winwinId:a.winwin.id})},a.goRequestedPatrocinio=function(){c.go("winwin-sponsors-admin",{winwinId:a.winwin.id})},a.goMiembros=function(){a.current_subadmin="miembros",c.go("winwin-view.admin_miembros",{winwinId:a.winwin.id})},a.goConfiguracion=function(){a.current_subadmin="configuracion",c.go("winwin-view.admin_configuracion",{winwinId:a.winwin.id})},a.goCampanada=function(){c.go("admin_campanada",{winwinId:a.winwin.id})}}]).controller("winwin-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$auth","Winwin","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.winwin_view=!0,a.show_closing_date=!1,a.show_description=!1,a.show_details=function(b){a.show_description=b},a.posts=[],a.last={},a.getPosts=function(){b.get(k+"/api/posts/winwin/"+d.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last})},a.winwin={},a.getWinwin=function(){a.winwin=i.get({id:d.winwinId},function(b){a.winwin=b,a.calculate_time()})},a.isSponsor=!1,j.getProfile().success(function(b){b&&(a.account=b.account,a.profile=b.profile,a.isSponsor=b.sponsor)}),a.duration_days=0,a.duration_hours=0,a.duration_minutes=0,a.calculate_time=function(){var b=moment(),c=moment(a.winwin.closing_date);if(a.show_closing_date=!1,a.winwin.closing_date&&c.isAfter(b)){a.duration_days=c.diff(b,"days"),console.log(a.duration_days),a.duration_hours=c.diff(b.add(a.duration_days,"days"),"hours"),console.log(a.duration_hours);var d=c.diff(b.add(a.duration_days,"days").add(a.duration_hours,"hours"),"minutes");a.duration_minutes=0>d?0:d,console.log(a.duration_minutes),a.show_closing_date=!0}},a.getWinwin(),a.viewProfile=function(a){console.log("User id: "+a),c.go("user-view",{userId:a})},a.join=function(){h.isAuthenticated()?b.get(k+"/api/winwins/join/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):c.go("signIn")},a.pass=function(){c.go("winwin-list")},a.left=function(){b.get(k+"/api/winwins/left/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_left",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-edit",["$scope","$state","$auth","$timeout","Upload","Winwin","Interest","api_host",function(a,b,c,d,e,f,g,h){a.winwin=new f({}),a.interests=[],a.scopes=["GLOBAL","REGION","COUNTRY","STATE","CITY"],a.first_stage=!0,a.second_stage=!1,a.winwin.closing_date=new Date,a.setup_components=function(){$('[data-toggle="popover"]').popover(),console.log("setup component")},d(function(){a.setup_components()},1e3),$("#datetimepicker1").datetimepicker({minDate:new Date,format:"DD - MM - YYYY"}),g.query(function(b){a.interests=b}),a.doValidateBasic=function(){return a.winwin.closing_date=$("#datetimepicker1").data("DateTimePicker").date(),!0},a.doValidateWinwin=function(){return a.winwin.gallery_image=a.image_gallery_selected,!a.saving},a.persistBasic=function(){console.log("persist basic"),a.doValidateBasic()&&(a.first_stage=!1,a.second_stage=!0,console.log("First Stage: "+a.first_stage),console.log("Second Stage: "+a.second_stage))},a.doSave=function(){console.log("do save"),a.doValidateWinwin()&&(a.saving=!0,a.winwin.$save(function(c){b.go("winwin-first-post",{winwinId:a.winwin.id})}))},a.uploading=!1,a.uploadFiles=function(b){console.dir(b),a.f=b,console.log(b.$error),b&&!b.$error&&(console.log("enviando..."),b.upload=e.upload({url:h+"/api/winwins/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,d(function(){b.result=c.data,a.winwin.image=c.data.filename,a.preview_image="http://images.dev-winwins.net/smart/"+a.winwin.image})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data,console.log(a.errorMsg))}),b.upload.progress(function(c){console.log("progress..."),a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){console.log("set video"),swal({title:"Video Link",text:"Ingresa direcci칩n de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.winwin.video=c,a.preview_image="http://img.youtube.com/vi/"+c+"/default.jpg"}):console.log("Wrong url")}})},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!0,a.image_gallery_selected||$("#image-gallery").imagepicker({changed:function(b,c){a.$apply(function(){a.gallery_picker=!1})}})},a.preview_image="",a.$watch("image_gallery_selected",function(){a.image_gallery_selected&&(a.preview_image="http://images.dev-winwins.net/smart/"+a.image_gallery_selected)})}]).controller("winwin-first-post",["$scope","$stateParams","$http","$state","$auth","$sce","$timeout","Winwin","Account","Upload","Post","api_host",function(a,b,c,d,e,f,g,h,i,j,k,l){console.dir(b),a.post=new k({}),a.profile={},a.winwin={},i.getProfile().success(function(b){b&&(a.profile=b.profile)}),h.get({id:b.winwinId},function(b){a.winwin=b,a.post.reference_id=b.id,a.post.type="WINWIN"}),a.submitPost=function(){console.log("submit"),console.dir(a.post),a.post.$save(function(b){c.get(l+"/api/winwins/activate/"+a.winwin.id).success(function(b){swal({title:"Info",text:"winwin_activated",type:"info",showcancelbutton:!1,closeonconfirm:!0}),d.go("winwin-promote",{winwinId:a.winwin.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})})},a["continue"]=function(){d.go("winwin-view",{winwinId:a.winwin.id})},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){console.log("set video"),swal({title:"Video Link",text:"Ingresa direcci칩n de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.post.media_type="VIDEO",a.post.media_path=c}):(console.log("Wrong url"),swal({title:"Incorrecto",text:"La direccion ingresada no es correcta",type:"warning"}))}})},a.getIframeSrc=function(a){return f.trustAsResourceUrl("http://www.youtube.com/embed/"+a)},a.uploading=!1,a.uploadFiles=function(b){console.dir(b),a.f=b,console.log(b.$error),b&&!b.$error&&(console.log("enviando..."),b.upload=j.upload({url:l+"/api/posts/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,g(function(){b.result=c.data,a.post.media_id=c.data.media_id,a.post.media_type="IMAGE",a.post.media_path=c.data.filename})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){console.log("progress..."),a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))}}]).controller("winwin-promote",["$scope","$stateParams","$http","$state","$timeout","Winwin","Account",function(a,b,c,d,e,f,g){a.profile={},a.winwin={},g.getProfile().success(function(b){b&&(a.profile=b.profile)}),f.get({id:b.winwinId},function(b){a.winwin=b}),a.goView=function(){a.promote=!1,a.success=!0,e(function(){d.go("winwin-view",{winwinId:a.winwin.id})},3e3)},a.promote=!0,a.success=!1}]).controller("winwin-list",["$scope","$http","$auth","$state","WinwinPaginate","api_host",function(a,b,c,d,e,f){a.winwins=new e,a.doFilter=function(a){console.log(a)},a.join=function(e){c.isAuthenticated()?b.get(f+"/api/winwins/join/"+e).success(function(b){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.view(e)}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):d.go("signIn")},a.view=function(a){console.log("view "+a),d.go("winwin-view",{winwinId:a})}}]).controller("winwin-search",["$scope","$http","api_host",function(a,b,c){a.winwins=[],a.do_search=function(){b.get(c+"/api/winwins/search/",{params:{q:a.query}}).success(function(b){a.winwins=b}).error(function(a){})}}]).controller("winwin-members",["$scope","$http","$timeout","$stateParams","$state","Winwin","api_host",function(a,b,c,d,e,f,g){a.members_view=!0,a.current="all",a.winwin={},console.log("State Params: "+d.winwinId),a.getWinwin=function(){a.winwin=f.get({id:d.winwinId},function(b){a.winwin=b,c(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})},1e3)})},a.getWinwin(),a.classType=function(a){return(a.pivot.moderator?"activator":"")+" "+(a.pivot.creator?"creator":"")},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},a.follow=function(a){b.get(g+"/api/users/follow/"+a.id).success(function(b){swal({title:"info",text:"user_following",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.following=!0}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.view=function(a){e.go("user-view",{userId:a.id})},a.unfollow=function(a){b.get(g+"/api/users/unfollow/"+a.id).success(function(b){swal({title:"info",text:"user_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.following=!1}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-sponsors",["$scope","$http","$timeout","$stateParams","Winwin","api_host",function(a,b,c,d,e,f){a.current="all",a.sponsors_view=!0,a.winwin={},a.getWinwin=function(){b.get(f+"/api/winwins/"+d.winwinId+"/sponsors").success(function(b){a.winwin=b,c(function(){$(".grid-sponsors").isotope({itemSelector:".sponsor-item",masonry:{columnWidth:380}})},1e3)})},a.getWinwin(),a.classType=function(a){return a.pivot.promoted?"promoted":""},a.filter=function(b){a.current=b,$(".grid-sponsors").isotope({filter:"all"==b?"*":"."+b})},a.follow=function(a){b.get(f+"/api/sponsors/follow/"+a.id).success(function(b){swal({title:"info",text:"user_following",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.following=!0}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.view=function(a){$state.go("sponsor-view",{userId:a.id})},a.unfollow=function(a){b.get(f+"/api/users/unfollow/"+a.id).success(function(b){swal({title:"info",text:"user_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.following=!1}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-muro",["$scope","$http","$stateParams","$sce","$timeout","Winwin","Account","Upload","Post","api_host",function(a,b,c,d,e,f,g,h,i,j){a.muro_view=!0,a.winwin={},a.getWinwin=function(){a.winwin=f.get({id:c.winwinId},function(b){a.winwin=b,a.getPosts()})},a.getPosts=function(){b.get(j+"/api/posts/winwin/"+c.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last,a.post=new i({}),a.editing=!1})},a.getWinwin(),a.post=new i({}),a.profile={},a.isSponsor=!1,g.getProfile().success(function(b){b&&(a.profile=b.profile,a.isSponsor=b.sponsor)}),a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){console.log("set video"),swal({title:"Video Link",text:"Ingresa direcci칩n de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.post.media_type="VIDEO",a.post.media_path=c}):(console.log("Wrong url"),swal({title:"Incorrecto",text:"La direccion ingresada no es correcta",type:"warning"}))}})},a.getIframeSrc=function(a){return d.trustAsResourceUrl("http://www.youtube.com/embed/"+a)},a.uploading=!1,a.uploadFiles=function(b){console.dir(b),a.f=b,console.log(b.$error),b&&!b.$error&&(console.log("enviando..."),b.upload=h.upload({url:j+"/api/posts/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,e(function(){b.result=c.data,a.post.media_id=c.data.media_id,a.post.media_type="IMAGE",a.post.media_path=c.data.filename})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,console.log("progress..."),b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.cancelEditing=function(){a.normal_size=!0,a.post=new i({}),a.editing=!1},a.submitPost=function(){console.log("submit post"),a.post.reference_id=a.winwin.id,a.post.type="WINWIN",console.dir(a.post),a.post.$save(function(b){swal({title:"Info",text:"post_send",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.normal_size=!0,a.editing=!1,a.getPosts()})},a.normal_size=!0,a.editing=!1,a.min_size=function(){a.normal_size=!0},a.max_size=function(){a.normal_size=!1,a.editing=!0},a.voteUp=function(a){},a.voteDown=function(a){},a.reply=function(a){a.isReplying=!0},a.cancelReply=function(a){a.isReplying=!1}}]).controller("winwin-campanada",["$scope","$http","$state","$stateParams","$timeout","Winwin","api_host",function(a,b,c,d,e,f,g){a.campanada_view=!0,a.campanada_success=!1,a.winwin={},a.getWinwin=function(){a.winwin=f.get({id:d.winwinId},function(b){a.winwin=b})},a.getWinwin(),a.sentCampanada=function(){b.post("/api/winwins/campanada/"+a.winwin.id,{body:a.body}).success(function(b){a.campanada_success=!1,e(function(){c.go("winwin-view",{winwinId:a.winwin.id})},4e3)}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-miembros",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-configuracion",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-patrocinio",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-sponsor-request",["$scope","$http","$state","$stateParams","Winwin",function(a,b,c,d,e){
a.sentRequest=function(){b.post("/api/winwins/sponsor_request/"+a.winwin.id,{body:a.body}).success(function(b){swal({title:"Info",text:"sponsor_request_sent",type:"info",showcancelbutton:!1,closeonconfirm:!0}),c.go("winwin-view",{winwinId:a.winwin.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("back_winwin-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$auth","Winwin","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.show_closing_date=!1,a.show_description=!1,a.show_details=function(b){a.show_description=b},a.posts=[],a.last={},a.getPosts=function(){b.get(k+"/api/posts/winwin/"+d.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last})},a.winwin={},a.getWinwin=function(){a.winwin=i.get({id:d.winwinId},function(b){a.winwin=b,a.calculate_time(),a.getPosts()})},a.isSponsor=!1,j.getProfile().success(function(b){b&&(a.account=b.account,a.profile=b.profile,a.isSponsor=b.sponsor)}),a.duration_days=0,a.duration_hours=0,a.duration_minutes=0,a.calculate_time=function(){var b=moment(),c=moment(a.winwin.closing_date);if(a.show_closing_date=!1,a.winwin.closing_date&&c.isAfter(b)){a.duration_days=c.diff(b,"days"),console.log(a.duration_days),a.duration_hours=c.diff(b.add(a.duration_days,"days"),"hours"),console.log(a.duration_hours);var d=c.diff(b.add(a.duration_days,"days").add(a.duration_hours,"hours"),"minutes");a.duration_minutes=0>d?0:d,console.log(a.duration_minutes),a.show_closing_date=!0}},a.getWinwin(),a.viewProfile=function(a){console.log("User id: "+a),c.go("user-view",{userId:a})},a.join=function(){h.isAuthenticated()?b.get(k+"/api/winwins/join/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):c.go("signIn")},a.pass=function(){c.go("winwin-list")},a.left=function(){b.get(k+"/api/winwins/left/"+a.winwin.id).success(function(b){a.getWinwin(),swal({title:"info",text:"winwin_left",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.first_view=!0,a.up_down=!0,a.setup_components=function(){var b=a;e(function(){b.view_height=$("winwin-view").height(),a.height_to_change=1.4*b.view_height,b.height_to_change=b.view_height,$(window).scroll(function(){$(this).scrollTop()>a.view_height?($("#menu-winwin").fadeIn(1),a.first_view&&(a.first_view=!1,a.goMuro()),a.up_down&&(a.up_down=!1,$("html, body").animate({scrollTop:430},0))):($("#menu-winwin").fadeOut(1),a.up_down=!0)})},1e3)},a.setup_components(),a.current_subview="muro",a.goMuro=function(){a.current_subview="muro",a.isAdmin=!1,e(function(){c.go("winwin-view.muro",{winwinId:a.winwin.id})},500)},a.goMembers=function(){c.go("winwin-members",{winwinId:a.winwin.id})},a.goSponsors=function(){a.current_subview="sponsors",a.isAdmin=!1,c.go("winwin-view.sponsors",{winwinId:a.winwin.id})},a.goWinwin=function(){window.scrollTo(0,0),a.isAdmin=!1,a.first_view=!1,g.hash("winwin-top"),f()},a.goAdmin=function(){a.winwin.is_moderator?(a.isAdmin=!0,console.dir(a.profile)):swal({title:"warning",text:"not_is_a_moderator",type:"warning",showcancelbutton:!1,closeonconfirm:!0})},a.goPatrocinio=function(){a.current_subadmin="patrocinio",c.go("winwin-view.admin_patrocinio",{winwinId:a.winwin.id})},a.goRequestPatrocinio=function(){a.current_subview="sponsor",c.go("winwin-view.winwin-sponsor-request",{winwinId:a.winwin.id})},a.goMiembros=function(){a.current_subadmin="miembros",c.go("winwin-view.admin_miembros",{winwinId:a.winwin.id})},a.goConfiguracion=function(){a.current_subadmin="configuracion",c.go("winwin-view.admin_configuracion",{winwinId:a.winwin.id})},a.goCampanada=function(){a.current_subadmin="campanada",c.go("winwin-view.admin_campanada",{winwinId:a.winwin.id})},a.isAdmin=!1,a.next=function(){console.log("next"),a.winwin.next_id&&c.go("winwin-view",{winwinId:a.winwin.next_id})},a.previous=function(){console.log("back"),a.winwin.previous_id&&c.go("winwin-view",{winwinId:a.winwin.previous_id})}}]),angular.module("winwinsApp").controller("search-list",["$scope","$stateParams","$state","$http","$auth","api_host",function(a,b,c,d,e,f){console.dir(b),a.hits=[],a.winwins=[],a.users=[],a.sponsors=[],a.groups=[],d.get(f+"/api/ww/search/",{params:{q:b.query}}).success(function(b){a.hits=b,a.users=b.users||[],a.winwins=b.winwins||[],a.groups=b.groups||[],a.sponsors=b.sponsors||[]}).error(function(a){console.log(a)}),a.view=function(a,b){switch(console.log("Type: "+a+" - Id: "+b),a){case"winwins":c.go("winwin-view",{winwinId:b});break;case"users":c.go("user-view",{userId:b});break;default:c.go("winwin-view",{winwinId:b})}},a.join=function(b){e.isAuthenticated()?d.get(f+"/api/winwins/join/"+b).success(function(c){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.view(b)}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):c.go("signIn")}}]),angular.module("winwinsApp").controller("group-edit",["$scope","$state","$auth","$timeout","Upload","Group","Interest",function(a,b,c,d,e,f,g){a.group=new f({}),a.doValidate=function(){return a.group.gallery_image=a.image_gallery_selected,!0},a.first_stage=!0,a.second_stage=!1,a.doFirstStage=function(){a.first_stage=!1,a.second_stage=!0},a.doSave=function(){a.doValidate()&&a.group.$save(function(c){a.first_stage=!1,a.second_stage=!1,b.go("group-promote",{groupId:a.group.id})})},a.uploading=!1,a.uploadFiles=function(b){console.log("uploading"),a.f=b,b&&!b.$error&&(b.upload=e.upload({url:"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,console.log("succeess"),d(function(){b.result=c.data,a.group.photo=c.data.filename,a.group.prephoto=c.data.filename,console.log(a.group.photo)})},function(b){console.log(b),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!0,a.image_gallery_selected||$("#image-gallery").imagepicker({changed:function(b,c){a.$apply(function(){a.gallery_picker=!1,console.log(c),a.group.prephoto=c[0]})}})}}]).controller("group-promote",["$scope","$state","$stateParams","$timeout","Group",function(a,b,c,d,e){a.group=new e({}),a.third_stage=!0,a.four_stage=!1,a.goToView=function(){a.third_stage=!1,a.four_stage=!0,d(function(){b.go("group-view",{groupId:a.group.id})},3e3)},a.getGroup=function(){a.group=e.get({id:c.groupId},function(a){})},a.getGroup()}]).controller("group-list",["$scope","$http","$auth","$state","GroupPaginate","api_host",function(a,b,c,d,e,f){a.groups=new e,a.doFilter=function(a){console.log(a)},a.join=function(e){c.isAuthenticated()?b.get(f+"/api/group/join/"+e).success(function(b){swal({title:"info",text:"group_join",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.view(winwin_id)}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):d.go("signIn")},a.view=function(a){console.log("view "+a),d.go("group-view",{groupId:a})}}]).controller("group-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","Group","Post","api_host",function(a,b,c,d,e,f,g,h,i,j){a.edit_user={},a.is_admin=!1,a.current_view="home",a.setCurrentView=function(b){a.current_view=b,a.is_admin="admin"==b},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){a.user_detail.myself&&(a.is_admin=!0)},a.getGroup=function(){a.group=h.get({id:d.groupId},function(b){a.getThread(b.id)})},a.getGroup(),a.join=function(){b.get(j+"/api/groups/join/"+a.group.id).success(function(b){a.getGroup(),swal({title:"info",text:"group_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.left=function(){b.get(j+"/api/groups/left/"+a.group.id).success(function(b){swal({title:"info",text:"group_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.addToGroup=function(c){b.get(j+"/api/groups/"+a.group.id+"/add_winwin/"+c).success(function(b){swal({title:"info",text:"winwin_added_to_group",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.removeFromGroup=function(c){b.get(j+"/api/groups/"+a.group.id+"/remove_winwin/"+c).success(function(b){swal({title:"info",text:"winwin_removed_from_group",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.viewSponsor=function(a){c.go("sponsor-view",{sponsorId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.viewUser=function(a){c.go("user-view",{userId:a})},a.viewGroup=function(a){c.go("group-view",{groupId:a})},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},e(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})}),a.editing_conversation=!1,a.conversation=new i({}),a.newConversation=function(){a.editing_conversation=!0},a.cancelConversation=function(){a.editing_conversation=!1},a.newReply=function(a){a.editing_reply=!0},a.cancelReply=function(a){a.editing_reply=!1},a.submitConversation=function(){console.log("submit"),b.post(j+"/api/groups/"+a.group.id+"/conversation",{content:a.conversation.content,title:a.conversation.title}).success(function(b){a.comments=b,a.conversation=new i({}),a.editing_conversation=!1}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.reply=new i({}),a.submitReply=function(c){console.log("submit"),b.post(j+"/api/groups/"+a.group.id+"/conversation/"+c.id,{content:a.reply.content}).success(function(b){a.comments=b,a.reply=new i({}),c.editing_reply=!1}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.getThread=function(c){b.get(j+"/api/group_thread/"+c).success(function(b){a.comments=b})},a.follow=function(c){b.get(j+"/api/users/follow/"+c.id).success(function(b){a.getUser(),swal({title:"info",text:"user_follow",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unfollow=function(c){b.get(j+"/api/users/unfollow/"+c.id).success(function(b){swal({title:"info",text:"user_unfollow",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("group-config",["$scope","$state","$auth","$timeout","$http","Upload","Group","Interest","api_host",function(a,b,c,d,e,f,g,h,i){a.doValidate=function(){return a.group.gallery_image=a.image_gallery_selected,!0},a.doSave=function(){a.doValidate()&&e.post(i+"/api/group/"+a.group.id,a.group).success(function(c){swal({title:"info",text:"group_updated",type:"info",showcancelbutton:!1,closeonconfirm:!0}),b.go("group-view",{groupId:a.group.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.uploading=!1,a.uploadFiles=function(b){console.log("uploading"),a.f=b,b&&!b.$error&&(b.upload=f.upload({url:"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,console.log("succeess"),d(function(){b.result=c.data,a.group.photo=c.data.filename,console.log(a.group.photo)})},function(b){console.log(b),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!0,a.image_gallery_selected||$("#image-gallery").imagepicker({changed:function(b,c){c&&(a.group.photo=!1),a.$apply(function(){a.gallery_picker=!1})}})}}]),angular.module("winwinsApp").controller("sponsor-list",["$scope","$state","SponsorPaginate",function(a,b,c){a.sponsors=new c,a.view=function(a){b.go("sponsor-view",{sponsorId:a})}}]).controller("sponsor-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","Sponsor","api_host",function(a,b,c,d,e,f,g,h,i){a.getSponsor=function(){a.sponsor=h.get({id:d.sponsorId},function(b){a.sponsor=b})},a.getSponsor(),a.follow=function(){b.get(i+"/api/sponsors/follow/"+a.sponsor.id).success(function(b){a.getSponsor(),swal({title:"info",text:"sponsor_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unfollow=function(){b.get(i+"/api/sponsors/unfollow/"+a.sponsor.id).success(function(b){swal({title:"info",text:"sponsor_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getSponsor()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]),angular.module("winwinsApp").controller("user-list",["$scope","$state","$http","$auth","UserPaginate","api_host",function(a,b,c,d,e,f){a.users=new e,a.isAuthenticated=function(){return d.isAuthenticated()},a.view=function(a){b.go("user-view",{userId:a})},a.follow=function(b){c.get(f+"/api/users/follow/"+b).success(function(b){a.getUser(),swal({title:"info",text:"user_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("user-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$rootScope","User","Post","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.comments=[],a.followers=[],a.following=[],a.getUser=function(){console.log("User id profile: "+d.userId),a.user=i.get({id:d.userId},function(b){a.user_detail=b,a.comments=b.comments,a.followers=b.followers,a.following=b.following})},a.getUser(),a.follow=function(){b.get(k+"/api/users/follow/"+a.user.id).success(function(b){a.getUser(),swal({title:"info",text:"user_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unfollow=function(){b.get(k+"/api/users/unfollow/"+a.user.id).success(function(b){swal({title:"info",text:"user_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.comment=new j({}),a.submitComment=function(){console.log("submit"),b.post(k+"/api/users/"+a.user.id+"/comment",{content:a.comment.content}).success(function(b){a.comments=b,a.comment=new j({})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},e(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})}),a.view=function(a){c.go("user-view",{userId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.viewUser=function(a){c.go("user-view",{userId:a})},a.viewGroup=function(a){c.go("group-view",{groupId:a})}}]).controller("ProfileCtrl",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","Upload","User","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.followers=[],a.following=[],a.comments=[],a.is_admin=!1,a.edit_user={},a.current_view="home",a.setCurrentView=function(b){a.current_view=b,a.is_admin="admin"==b},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){a.user_detail.myself&&(a.is_admin=!0)},a.getUser=function(){j.getProfile().then(function(b){a.account=b.data,i.get({id:a.account.user.id},function(b){a.user_detail=b,a.followers=b.followers,a.following=b.following,a.comments=b.comments,a.edit_user=b,a.setup_components()})})},a.getUser(),a.follow=function(c){b.get(k+"/api/users/follow/"+c).success(function(b){a.getUser(),swal({title:"info",text:"user_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unfollow=function(c){b.get(k+"/api/users/unfollow/"+c).success(function(b){swal({title:"info",text:"user_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.filter=function(b){a.current=b,a.isot.isotope({filter:"all"==b?"*":"."+b})},a.view=function(a){c.go("user-view",{userId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.viewUser=function(a){console.log("view user: "+a),c.go("user-view",{userId:a})},a.viewGroup=function(a){c.go("group-view",{groupId:a})},a.$watch("following",function(){a.following.length>0&&e(function(){a.isot=angular.element(".grid-participantes"),a.isot.isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})})}),a.$watch("followers",function(){a.followers.length>0&&e(function(){a.isot=angular.element(".grid-participantes"),a.isot.isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})})}),a.setup_components=function(){$("#datetimepicker1").datetimepicker({maxDate:new Date,format:"DD - MM - YYYY"}),console.log(a.edit_user.birthdate)},a.uploading=!1,a.uploadFiles=function(b){a.f=b,b&&!b.$error&&(b.upload=h.upload({url:"/api/me/upload",file:b}),b.upload.then(function(c){a.uploading=!1,e(function(){b.result=c.data,a.edit_user.photo=c.data.filename})},function(b){a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.uploading_cover=!1,a.uploadFilesCover=function(b){a.fc=b,b&&!b.$error&&(b.upload=h.upload({url:"/api/me/upload",file:b}),b.upload.then(function(c){a.uploading_cover=!1,e(function(){b.result=c.data,a.edit_user.cover_photo=c.data.filename})},function(b){a.uploading_cover=!1,b.status>0&&(a.errorMsgCover=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading_cover=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.saveProfile=function(){a.edit_user.birthdate=$("#datetimepicker1").data("DateTimePicker").date(),b.post(k+"/api/profile",a.edit_user).success(function(b){a.getUser(),swal({title:"info",text:"user_updated",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.setOption=function(b,c){a.edit_user[b]=c,console.log("Key: "+b+" - value: "+c),console.log("user_edit: "+a.edit_user[b])}}]).controller("ProfileNotificaciones",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","User","Account","api_host",function(a,b,c,d,e,f,g,h,i,j){a.getUser=function(){i.getProfile().then(function(b){a.account=b.data,h.get({id:a.account.user.id},function(b){a.user_detail=b})}),b.get(j+"/api/me/notificactions/read").success(function(a){})},a.getUser()}]),angular.module("winwinsApp").controller("WinwinMenuCtrl",["$scope","$state","$stateParams","$window",function(a,b,c,d){$(window).unbind("scroll"),$(window).bind("scroll",function(){console.log($(window).scrollTop())}),a.submenu={members:!1,sponsors:!1,comments:!0,config:!1},a.subMenuClick=function(c){$.each(a.submenu,function(b,c){a.submenu[b]=!1}),a.submenu[c]=!0,b.go("winwin."+c)}}]),angular.module("winwinsApp").controller("CreateWWCtrl",["$scope",function(a){a.region="",a.category="",a.selectRegion=function(b){a.region=b},a.selectCategory=function(b){a.category=b}}]),angular.module("winwinsApp").controller("ActivateWWCtrl",["$scope",function(a){a.backImg="https://mehranbanaei.files.wordpress.com/2014/12/children-in-central-african-republic.jpg",a.icon="../images/placeholder-square.jpg"}]),angular.module("winwinsApp").controller("LoginCtrl",["$scope","$rootScope","$auth","$state","$timeout","SweetAlert",function(a,b,c,d,e,f){a.show_login=!0,a.redirect_message=!1,a.login=function(){c.login({email:a.email,password:a.password}).then(function(c){b.currentUser=c,b.$broadcast("is_logged",!0),console.log("LOGIN"),a.show_login=!1,a.redirect_message=!0,e(function(){console.log("redirect"),d.go("main")},5e3)})["catch"](function(a){f.swal(a.data.message,"try_again","warning",function(){d.go("signin")})})},a.authenticate=function(a){c.authenticate(a).then(function(){})["catch"](function(a){f.swal(a.data.message,"try_again","warning",function(){d.go("signin")})})}}]).controller("FailureLogin",["$scope","$state","$timeout",function(a,b,c){}]).controller("SuccessLogin",["$scope","$state","$timeout",function(a,b,c){c(function(){b.go("main")},3e3)}]),angular.module("winwinsApp").controller("LogoutCtrl",["$auth","$rootScope",function(a,b){a.isAuthenticated()&&a.logout().then(function(){b.$broadcast("is_logged",!1)})}]),angular.module("winwinsApp").controller("MembersCtrl",["$scope","$animate",function(a,b){}]),angular.module("winwinsApp").controller("NavController",["$scope","$rootScope","$state","$location","$auth","$window","Account",function(a,b,c,d,e,f,g){a.isCollapsed=!0,a.unreadNotifications=0,a.profile=!1,a.is_logged=!1,a.profile_image=0,a.$on("$routeChangeSuccess",function(){a.isCollapsed=!0}),a.$on("$stateChangeStart",function(){a.isCollapsed=!0,e.isAuthenticated()?g.getStatus().then(function(b){a.unreadNotifications=b.data.notifications_unread,console.log(a.unreadNotifications)}):a.unreadNotifications=0}),b.$on("is_logged",function(c,d){console.log("logged: "+d),a.is_logged=d,d?a.fetching_profile||a.profile||(a.fetching_profile=!0,g.getProfile().then(function(c){a.fetching_profile=!1,a.profile=c.data.profile,b.account=a.profile})):(a.profile=!1,a.is_logged=!1,a.profile_image=0,b.account={})}),b.$on("$stateChangeSuccess",function(a,b){0===b.name.lastIndexOf("winwin-view.",0)?(console.log("not scroll at all"),$("html, body").animate({scrollTop:430},0)):(console.log("scroll to top"),$("html, body").animate({scrollTop:1},0))}),a.isAuthenticated=function(){var c=e.isAuthenticated();return a.fetching_profile||a.profile||!c||(a.fetching_profile=!0,g.getProfile().then(function(c){a.fetching_profile=!1,a.profile=c.data.profile,b.$broadcast("is_logged",!0)})),c},a.fetching_profile=!1,a.getProfile=function(){e.isAuthenticated();return a.profile},a.do_back=function(){f.history.back()},a.goProfile=function(){c.go("profile")},a.goNotifications=function(){c.go("profile_notificaciones")}}]),angular.module("winwinsApp").directive("closingDatePicker",["$window","$templateCache",function(a,b){if(!a.moment)return console.log("moment.js is required for this datepicker, http://momentjs.com/"),{link:function(){}};var c="datepicker.directive.html",d=b.get(c);return d||(d=['<div ng-repeat="i in localeOrder track by $index"  class="dropdown col-xs-4 no-padding">','<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">','<span ng-bind="date[options[i].name] || options[i].name"> </span>','<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">','<li ng-repeat="(j, option) in options[i].options track by $index">','<span style="cursor:pointer" ng-click="select(options[i].name, option)" ng-bind="options[i].labels[j] || option.value"></span>',"</li>","</ul>","</div>"].join(""),b.put(c,d)),{restrict:"A",require:"ngModel",templateUrl:c,scope:{model:"=ngModel",minDate:"=minDate",maxDate:"=maxDate",locale:"=?locale"},link:function(a,b,c,d){function e(b){var c=j.get("years"),d=i.get("years"),e=j.get("month"),f=i.get("month"),k=j.get("date"),l=i.get("date");if(i!==j){a.options.years.options=[];for(var m=d;c>=m;m++){var n={value:m,available:!0};b&&b.years===m&&(n.selected=!0),a.options.years.options.push(n)}}if(i!==j){a.options.months.options=[];for(var m=0;m<h.length;m++){var o={value:h[m]};b&&b.months===h[m]&&(o.selected=!0),b&&b.years&&(b.years===d?f>m&&(o.disabled=!0):b.years===c&&m>e&&(o.disabled=!0)),a.options.months.options.push(o)}}if(i!==j)if(a.options.days.options=[],b&&b.years&&b.months||b.months){var p;p=b.years?b.years:moment().get("year");for(var q=moment({years:p,months:h.indexOf(b.months)}).endOf("month").get("date"),m=0;q>m;m++){var r={};r.value=m+1,b&&b.days&&b.days===m+1&&(r.selected=!0),b.years&&b.months&&(b.years===d&&h.indexOf(b.months)===f?l>m&&(r.disabled=!0):b.years===c&&h.indexOf(b.months)===e&&m>k&&(r.disabled=!0)),a.options.days.options.push(r)}}else{a.options.days.options=[];for(var m=0;m<g.length;m++){var r={};r.value=m+1,b&&b.days&&b.days===m+1&&(r.selected=!0),a.options.days.options.push(r)}}}function f(){if(void 0!==a.date.years&&void 0!==a.date.months&&void 0!==a.date.days){var b={years:a.date.years,months:h.indexOf(a.date.months),date:a.date.days};b=moment.utc(b),d.$setViewValue(b)}}var g=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],h=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];a.localeOrder=["days","months","years"];var i,j,k={days:{name:"days",initLabel:"D칤a",options:[]},months:{name:"months",initLabel:"Mes",options:[]},years:{name:"years",initLabel:"A침o",options:[]}};if(a.minDate&&"now"!==a.minDate){var l;l="number"==typeof a.minDate?a.minDate>0?moment().add(a.minDate,"years"):a.minDate<0?moment().subtract(Math.abs(a.minDate),"years"):moment():moment(a.minDate),i=l}else i=moment();if(a.maxDate&&"now"!==a.maxDate){var m;m="number"==typeof a.maxDate?a.maxDate>0?moment().add(a.maxDate,"years"):a.maxDate<0?moment().subtract(Math.abs(a.maxDate),"years"):moment():moment(a.maxDate),j=m}else j=moment();a.options=angular.copy(k),a.date={},a.select=function(b,c){(void 0===c.disabled||c.disabled!==!0)&&(a.date[b]=c.value,e(a.date),f())};var n=function(b){if(void 0!==b){var c=moment(b);e({years:c.get("year"),months:h[c.get("months")],days:c.get("date")})}else e();if(void 0!==b){var d=moment(b);if(d.isValid()){var g={};g.days=d.date(),g.months=h[d.month()],g.years=d.year(),a.date=g}}else a.date={};return f(),b},o=function(a){return a&&a.isValid()?(a.isAfter(i)||i.isSame(a))&&(j.isAfter(a)||j.isSame(a))?(d.$setValidity("not-allowed",!0),a.format()):void d.$setValidity("not-allowed",!1):void 0};d.$parsers.push(o),d.$formatters.push(n)}}}]),angular.module("birth-day",["ng"]).directive("birthDayPicker",function(){return{restrict:"A",replace:!0,required:"birthday",scope:{birthday:"=",onChange:"&"},template:'<div class="birthday-picker input-group"><input type="number" placeholder="D칤a" id="monthDay" ng-model="birthDay" min="1" max="31" max-lengh="2" ng-change="birthpickerchanged();" class="birth-day form-control col-xs-4 col-md-4 no-padding"/><select ng-model="birthMonth" ng-change="birthpickerchanged();" class="birth-month  form-control col-xs-4 col-md-4 no-padding"><option value="1">Enero</option><option value="2">Febrero</option><option value="3">Marzo</option><option value="4">Abril</option><option value="5">Mayo</option><option value="6">Junio</option><option value="7">Julio</option><option value="8">Agosto</option><option value="9">Septiembre</option><option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option></select><input type="number" placeholder="A침o" id="Year" ng-model="birthYear" min="1900" max-lengh="4"  max="{{maxyear();}}" ng-change="birthpickerchanged();" class="birth-year form-control col-xs-4 col-md-4 no-padding" name="birth"/></div>',link:function(a,b,c){if(null==a.birthday)a.birthMonth=(new Date).getMonth(),a.birthDay=(new Date).getDate(),a.birthYear=(new Date).getFullYear();else{var d=new Date(a.birthday);a.birthMonth=d.getMonth()+1,a.birthDay=d.getDate(),a.birthYear=d.getFullYear()}a.birthpickerchanged=function(){a.birthDay>31?a.birthDay=31:a.birthDay<=0?a.birthDay=1:void 0==a.birthDay&&(a.birthDay=31),a.birthDay>a.maxyear()&&(a.birthDay=a.maxyear());var b=new Date(a.birthYear,a.birthMonth-1,a.birthDay,0,0,0);a.birthday=b,a.onChange({data:a.birthday})},a.maxyear=function(){return(new Date).getFullYear()}}}}),angular.module("winwinsApp").directive("ensureUnique",["$http",function(a){return{require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngModel,function(){})}}}]).directive("compareTo",[function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b==a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}]),angular.module("winwinsApp").directive("searchBar",["$animate","$state",function(a,b){return{restrict:"E",replace:!0,scope:{},templateUrl:"views/extras/searchBar.html",link:function(a,c,d,e){a.searchActive=!1,a.toggleSearchBar=function(){a.searchActive=!a.searchActive,a.searchActive},a.search=function(){console.dir($("#query").val()),b.go("search-list",{query:$("#query").val(),winwin:$("#search_winwin").val(),user:$("#search_user").val(),group:$("#search_group").val(),sponsor:$("#search_sponsor").val()})}}}}]),angular.module("winwinsApp").directive("ngTranslateLanguageSelect",["LocaleService",function(a){"use strict";return{restrict:"A",replace:!0,template:'<div class="dropdown language-select" ng-if="visible"><select ng-model="currentLocaleDisplayName"ng-options="localesDisplayName for localesDisplayName in localesDisplayNames"ng-change="changeLanguage(currentLocaleDisplayName)"></select></div>',controller:["$scope",function(b){b.currentLocaleDisplayName=a.getLocaleDisplayName(),b.localesDisplayNames=a.getLocalesDisplayNames(),b.visible=b.localesDisplayNames&&b.localesDisplayNames.length>1,b.changeLanguage=function(b){a.setLocaleByDisplayName(b)}}]}}]),angular.module("truncate",[]).filter("characters",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+""}return a}}).filter("splitcharacters",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){var c=a.substring(0,b/2),d=a.substring(a.length-b/2,a.length);return c+"..."+d}return a}}).filter("words",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a){var c=a.split(/\s+/);c.length>b&&(a=c.slice(0,b).join(" ")+"")}return a}}),angular.module("truncate",[]).filter("moment",function(){return function(a,b){return moment(a).format(b)}}),angular.module("winwinsApp").factory("Group",["$resource","api_host",function(a,b){return a(b+"/api/groups/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Sponsor",["$resource","api_host",function(a,b){return a(b+"/api/sponsors/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Account",["$http","api_host",function(a,b){return{getProfile:function(){return a.get(b+"/api/me")},getStatus:function(){return a.get(b+"/api/me/status")},updateProfile:function(c){return a.put(b+"/api/me",c)}}}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Winwin",["$resource","api_host",function(a,b){return a(b+"/api/winwins/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Post",["$resource","api_host",function(a,b){return a(b+"/api/posts/:id",{id:"@id"},{update:{method:"POST"
}})}]).factory("Comment",["$resource","api_host",function(a,b){return a(b+"/api/comments/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("ActivityType",["$resource","api_host",function(a,b){return a(b+"/api/parametric/activities/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Interest",["$resource","api_host",function(a,b){return a(b+"/api/parametric/interests/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Marital",["$resource","api_host",function(a,b){return a(b+"/api/parametric/marital/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Language",["$resource","api_host",function(a,b){return a(b+"/api/parametric/languages/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("TokenService",["$http","api_host",function(a,b){function c(){return a.get(b+"/auth/token").then(d,e)}function d(a){return a}function e(a){return a}return{get:c}}]).factory("WinwinPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/winwins/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]).factory("GroupPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/groups/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]).factory("UserPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/users/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]).factory("SponsorPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/sponsors/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]),angular.module("winwinsApp").service("LocaleService",["$translate","LOCALES","$rootScope","tmhDynamicLocale",function(a,b,c,d){"use strict";var e=b.locales,f=Object.keys(e);f&&0!==f.length||console.error("There are no _LOCALES provided");var g=[];f.forEach(function(a){g.push(e[a])});var h=a.proposedLanguage(),i=function(a){return-1!==f.indexOf(a)},j=function(b){return i(b)?(h=b,void a.use(b)):void console.error('Locale name "'+b+'" is invalid')};return c.$on("$translateChangeSuccess",function(a,b){document.documentElement.setAttribute("lang",b.language),d.set(b.language.toLowerCase().replace(/_/g,"-"))}),{getLocaleDisplayName:function(){return e[h]},setLocaleByDisplayName:function(a){j(f[g.indexOf(a)])},getLocalesDisplayNames:function(){return g}}}]);