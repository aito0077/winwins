!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return null==a?!1:a.classList.contains(b)},e=function(a,b){return null==a?!1:void a.classList.add(b)},f=function(a,b){return null==a?!1:void a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};jQuery.fn.extend({imagepicker:function(b){return null==b&&(b={}),this.each(function(){var c;return c=jQuery(this),c.data("picker")&&c.data("picker").destroy(),c.data("picker",new a(this,d(b))),null!=b.initialized?b.initialized.call(c.data("picker")):void 0})}}),d=function(a){var b;return b={hide_select:!0,show_label:!1,initialized:void 0,changed:void 0,clicked:void 0,selected:void 0,limit:void 0,limit_reached:void 0},jQuery.extend(b,a)},c=function(a,b){return 0===jQuery(a).not(b).length&&0===jQuery(b).not(a).length},a=function(){function a(a,b){this.opts=null!=b?b:{},this.sync_picker_with_select=e(this.sync_picker_with_select,this),this.select=jQuery(a),this.multiple="multiple"===this.select.attr("multiple"),null!=this.select.data("limit")&&(this.opts.limit=parseInt(this.select.data("limit"))),this.build_and_append_picker()}return a.prototype.destroy=function(){var a,b,c,d;for(d=this.picker_options,b=0,c=d.length;c>b;b++)a=d[b],a.destroy();return this.picker.remove(),this.select.unbind("change"),this.select.removeData("picker"),this.select.show()},a.prototype.build_and_append_picker=function(){var a=this;return this.opts.hide_select&&this.select.hide(),this.select.change(function(){return a.sync_picker_with_select()}),null!=this.picker&&this.picker.remove(),this.create_picker(),this.select.after(this.picker),this.sync_picker_with_select()},a.prototype.sync_picker_with_select=function(){var a,b,c,d,e;for(d=this.picker_options,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.is_selected()?e.push(a.mark_as_selected()):e.push(a.unmark_as_selected());return e},a.prototype.create_picker=function(){return this.picker=jQuery("<ul class='thumbnails image_picker_selector'></ul>"),this.picker_options=[],this.recursively_parse_option_groups(this.select,this.picker),this.picker},a.prototype.recursively_parse_option_groups=function(a,c){var d,e,f,g,h,i,j,k,l,m;for(k=a.children("optgroup"),g=0,i=k.length;i>g;g++)f=k[g],f=jQuery(f),d=jQuery("<ul></ul>"),d.append(jQuery("<li class='group_title'>"+f.attr("label")+"</li>")),c.append(jQuery("<li>").append(d)),this.recursively_parse_option_groups(f,d);for(l=function(){var c,d,f,g;for(f=a.children("option"),g=[],c=0,d=f.length;d>c;c++)e=f[c],g.push(new b(e,this,this.opts));return g}.call(this),m=[],h=0,j=l.length;j>h;h++)e=l[h],this.picker_options.push(e),e.has_image()&&m.push(c.append(e.node));return m},a.prototype.has_implicit_blanks=function(){var a;return function(){var b,c,d,e;for(d=this.picker_options,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.is_blank()&&!a.has_image()&&e.push(a);return e}.call(this).length>0},a.prototype.selected_values=function(){return this.multiple?this.select.val()||[]:[this.select.val()]},a.prototype.toggle=function(a){var b,d,e;return d=this.selected_values(),e=a.value().toString(),this.multiple?f.call(this.selected_values(),e)>=0?(b=this.selected_values(),b.splice(jQuery.inArray(e,d),1),this.select.val([]),this.select.val(b)):null!=this.opts.limit&&this.selected_values().length>=this.opts.limit?null!=this.opts.limit_reached&&this.opts.limit_reached.call(this.select):this.select.val(this.selected_values().concat(e)):this.has_implicit_blanks()&&a.is_selected()?this.select.val(""):this.select.val(e),c(d,this.selected_values())||(this.select.change(),null==this.opts.changed)?void 0:this.opts.changed.call(this.select,d,this.selected_values())},a}(),b=function(){function a(a,b,c){this.picker=b,this.opts=null!=c?c:{},this.clicked=e(this.clicked,this),this.option=jQuery(a),this.create_node()}return a.prototype.destroy=function(){return this.node.find(".thumbnail").unbind()},a.prototype.has_image=function(){return null!=this.option.data("img-src")},a.prototype.is_blank=function(){return!(null!=this.value()&&""!==this.value())},a.prototype.is_selected=function(){var a;return a=this.picker.select.val(),this.picker.multiple?jQuery.inArray(this.value(),a)>=0:this.value()===a},a.prototype.mark_as_selected=function(){return this.node.find(".thumbnail").addClass("selected")},a.prototype.unmark_as_selected=function(){return this.node.find(".thumbnail").removeClass("selected")},a.prototype.value=function(){return this.option.val()},a.prototype.label=function(){return this.option.data("img-label")?this.option.data("img-label"):this.option.text()},a.prototype.clicked=function(){return this.picker.toggle(this),null!=this.opts.clicked&&this.opts.clicked.call(this.picker.select,this),null!=this.opts.selected&&this.is_selected()?this.opts.selected.call(this.picker.select,this):void 0},a.prototype.create_node=function(){var a,b;return this.node=jQuery("<li/>"),a=jQuery("<img class='image_picker_image'/>"),a.attr("src",this.option.data("img-src")),b=jQuery("<div class='thumbnail'>"),b.click({option:this},function(a){return a.data.option.clicked()}),b.append(a),this.opts.show_label&&b.append(jQuery("<p/>").html(this.label())),this.node.append(b),this.node},a}()}.call(this),angular.module("config",[]).constant("api_host","http://dev-winwins.net").constant("e_host","http://search.dev-winwins.net").value("debug",!0),!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,
currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)}),!function(a){"function"==typeof require&&"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(["velocity"],a):a()}(function(){return function(a,b,c,d){function e(a,b){var c=[];return a&&b?(g.each([a,b],function(a,b){var d=[];g.each(b,function(a,b){for(;b.toString().length<5;)b="0"+b;d.push(b)}),c.push(d.join(""))}),parseFloat(c[0])>parseFloat(c[1])):!1}if(!a.Velocity||!a.Velocity.Utilities)return void(b.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var f=a.Velocity,g=f.Utilities,h=f.version,i={major:1,minor:1,patch:0};if(e(i,h)){var j="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(j),new Error(j)}f.RegisterEffect=f.RegisterUI=function(a,b){function c(a,b,c,d){var e,h=0;g.each(a.nodeType?[a]:a,function(a,b){d&&(c+=a*d),e=b.parentNode,g.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],function(a,c){h+=parseFloat(f.CSS.getPropertyValue(b,c))})}),f.animate(e,{height:("In"===b?"+":"-")+"="+h},{queue:!1,easing:"ease-in-out",duration:c*("In"===b?.6:1)})}return f.Redirects[a]=function(e,h,i,j,k,l){function m(){h.display!==d&&"none"!==h.display||!/Out$/.test(a)||g.each(k.nodeType?[k]:k,function(a,b){f.CSS.setPropertyValue(b,"display","none")}),h.complete&&h.complete.call(k,k),l&&l.resolver(k||e)}var n=i===j-1;b.defaultDuration="function"==typeof b.defaultDuration?b.defaultDuration.call(k,k):parseFloat(b.defaultDuration);for(var o=0;o<b.calls.length;o++){var p=b.calls[o],q=p[0],r=h.duration||b.defaultDuration||1e3,s=p[1],t=p[2]||{},u={};if(u.duration=r*(s||1),u.queue=h.queue||"",u.easing=t.easing||"ease",u.delay=parseFloat(t.delay)||0,u._cacheValues=t._cacheValues||!0,0===o){if(u.delay+=parseFloat(h.delay)||0,0===i&&(u.begin=function(){h.begin&&h.begin.call(k,k);var b=a.match(/(In|Out)$/);b&&"In"===b[0]&&q.opacity!==d&&g.each(k.nodeType?[k]:k,function(a,b){f.CSS.setPropertyValue(b,"opacity",0)}),h.animateParentHeight&&b&&c(k,b[0],r+u.delay,h.stagger)}),null!==h.display)if(h.display!==d&&"none"!==h.display)u.display=h.display;else if(/In$/.test(a)){var v=f.CSS.Values.getDisplayType(e);u.display="inline"===v?"inline-block":v}h.visibility&&"hidden"!==h.visibility&&(u.visibility=h.visibility)}o===b.calls.length-1&&(u.complete=function(){if(b.reset){for(var a in b.reset){var c=b.reset[a];f.CSS.Hooks.registered[a]!==d||"string"!=typeof c&&"number"!=typeof c||(b.reset[a]=[b.reset[a],b.reset[a]])}var g={duration:0,queue:!1};n&&(g.complete=m),f.animate(e,b.reset,g)}else n&&m()},"hidden"===h.visibility&&(u.visibility=h.visibility)),f.animate(e,q,u)}},f},f.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var k in f.RegisterEffect.packagedEffects)f.RegisterEffect(k,f.RegisterEffect.packagedEffects[k]);f.RunSequence=function(a){var b=g.extend(!0,[],a);b.length>1&&(g.each(b.reverse(),function(a,c){var d=b[a+1];if(d){var e=c.o||c.options,h=d.o||d.options,i=e&&e.sequenceQueue===!1?"begin":"complete",j=h&&h[i],k={};k[i]=function(){var a=d.e||d.elements,b=a.nodeType?[a]:a;j&&j.call(b,b),f(c)},d.o?d.o=g.extend({},h,k):d.options=g.extend({},h,k)}}),b.reverse()),f(b[0])}}(window.jQuery||window.Zepto||window,window,document)}),jQuery(document).ready(function(a){function b(b,d){"desktop"==b&&d?("on"==q?(f(),a(window).on("DOMMouseScroll mousewheel",g)):(c(),a(window).on("scroll",c)),y.on("click",h),z.on("click",i),a(document).on("keydown",function(b){"40"!=b.which||z.hasClass("inactive")?"38"==b.which&&(!y.hasClass("inactive")||y.hasClass("inactive")&&a(window).scrollTop()!=w.eq(0).offset().top)&&(b.preventDefault(),h()):(b.preventDefault(),i())}),l()):"mobile"==b&&(m(),a(window).off("DOMMouseScroll mousewheel",g),a(window).off("scroll",c),y.off("click",h),z.off("click",i),a(document).off("keydown"))}function c(){window.requestAnimationFrame?window.requestAnimationFrame(d):d()}function d(){var b=a(window).scrollTop(),c=a(window).height();a(window).width();w.each(function(){var d=a(this),f=b-d.offset().top,g=p(f,c,r);e(d.children("div"),g[0],g[1],g[2],g[3],g[4]),f>=0&&c>f?d.addClass("visible"):d.removeClass("visible")}),l()}function e(a,b,c,d,e,f){a.velocity({translateY:b+"vh",scale:c,rotateX:d,opacity:e,boxShadowBlur:f+"px",translateZ:0},0)}function f(){var a=w.filter(".visible"),b=a.prevAll(".cd-section"),c=a.nextAll(".cd-section"),d=o(r,!1),e=d[0],f=d[1],g=d[2];a.children("div").velocity(e,1,function(){a.css("opacity",1),b.css("opacity",1),c.css("opacity",1)}),b.children("div").velocity(f,0),c.children("div").velocity(g,0)}function g(a){return a.originalEvent.detail<0||a.originalEvent.wheelDelta>0?(s--,Math.abs(s)>=t&&h()):(s++,s>=t&&i()),!1}function h(b){"undefined"!=typeof b&&b.preventDefault();var d=w.filter(".visible"),e="off"==q&&a(window).scrollTop()!=d.offset().top?!0:!1;d=e?d.next(".cd-section"):d;var f=o(r,e,"prev");j(d.prev(".cd-section"),f[3]),v||d.is(":first-child")||(v=!0,d.removeClass("visible").children("div").velocity(f[2],f[3],f[4]).end().prev(".cd-section").addClass("visible").children("div").velocity(f[0],f[3],f[4],function(){v=!1,"off"==q&&a(window).on("scroll",c)}),u-=1),k()}function i(b){"undefined"!=typeof b&&b.preventDefault();var d=w.filter(".visible"),e="off"==q&&a(window).scrollTop()!=d.offset().top?!0:!1,f=o(r,e,"next");j(d.next(".cd-section"),f[3]),v||d.is(":last-of-type")||(v=!0,d.removeClass("visible").children("div").velocity(f[1],f[3],f[4]).end().next(".cd-section").addClass("visible").children("div").velocity(f[0],f[3],f[4],function(){v=!1,"off"==q&&a(window).on("scroll",c)}),u+=1),k()}function j(b,d){"off"==q&&(a(window).off("scroll",c),"catch"==r?a("body, html").scrollTop(b.offset().top):b.velocity("scroll",{duration:d}))}function k(){s=0,l()}function l(){w.filter(".visible").is(":first-of-type")?y.addClass("inactive"):y.removeClass("inactive"),w.filter(".visible").is(":last-of-type")?z.addClass("inactive"):z.removeClass("inactive")}function m(){w.children("div").each(function(){a(this).attr("style","")})}function n(){return window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"")}function o(a,b,c){var d="translateNone",e="translateUp",f="translateDown",g="ease",h=800;switch(a){case"scaleDown":e="scaleDown",g="easeInCubic";break;case"rotate":"off"==q?(e="rotation.scroll",f="translateNone"):(e="rotation",g="easeInCubic");break;case"gallery":h=1500,b?(e="scaleDown.moveUp.scroll",d="scaleUp.moveUp.scroll",f="scaleDown.moveDown.scroll"):(d="next"==c?"scaleUp.moveUp":"scaleUp.moveDown",e="scaleDown.moveUp",f="scaleDown.moveDown");break;case"catch":d="translateUp.delay";break;case"opacity":h=700,e="hide.scaleUp",f="hide.scaleDown";break;case"fixed":e="translateNone",g="easeInCubic";break;case"parallax":e="translateUp.half",g="easeInCubic"}return[d,e,f,h,g]}function p(a,b,c){var d=1,e=100,f="0deg",g=1,h=0;if(a>=-b&&0>=a)switch(e=100*-a/b,c){case"scaleDown":d=1,g=1;break;case"rotate":e=0;break;case"gallery":a>=-b&&-.9*b>a?(d=-a/b,e=100*-a/b,h=400*(1+a/b)):a>=-.9*b&&-.1*b>a?(d=.9,e=-1.125*(a+.1*b)*100/b,h=40):(d=1+a/b,e=0,h=-400*a/b);break;case"catch":a>=-b&&-.75*b>a?(e=100,h=160*(1+a/b)):(e=-(10/7.5)*a*100/b,h=-160*a/(3*b));break;case"opacity":e=0,d=.2*(a+5*b)/b,g=(a+b)/b}else if(a>0&&b>=a)switch(e=100*-a/b,c){case"scaleDown":d=(1-.3*a/b).toFixed(5),g=(1-a/b).toFixed(5),e=0,h=40*(a/b);break;case"rotate":g=(1-a/b).toFixed(5),f=90*a/b+"deg",e=0;break;case"gallery":a>=0&&.1*b>a?(d=(b-a)/b,e=100*-(a/b),h=400*a/b):a>=.1*b&&.9*b>a?(d=.9,e=-1.125*(a-.1*b/9)*100/b,h=40):(d=a/b,e=-100,h=400*(1-a/b));break;case"catch":h=a>=0&&b/2>a?80*a/b:80*(1-a/b);break;case"opacity":e=0,d=.2*(a+5*b)/b,g=(b-a)/b;break;case"fixed":e=0;break;case"parallax":e=50*-a/b}else if(-b>a)switch(e=100,c){case"scaleDown":d=1,g=1;break;case"gallery":d=1;break;case"opacity":e=0,d=.8,g=0}else switch(e=-100,c){case"scaleDown":d=0,g=.7,e=0;break;case"rotate":e=0,f="90deg";break;case"gallery":d=1;break;case"opacity":e=0,d=1.2,g=0;break;case"fixed":e=0;break;case"parallax":e=-50}return[e,d,f,g,h]}var q=a("body").data("hijacking"),r=a("body").data("animation"),s=0,t=5,u=1,v=!1,w=a(".cd-section"),x=a(".cd-vertical-nav"),y=x.find("a.cd-prev"),z=x.find("a.cd-next"),A=n(),B=!1;b(A,!0),a(window).on("resize",function(){A=n(),b(A,B),"mobile"==A&&(B=!0),"desktop"==A&&(B=!1)})}),$.Velocity.RegisterEffect("translateUp",{defaultDuration:1,calls:[[{translateY:"-100%"},1]]}),$.Velocity.RegisterEffect("translateDown",{defaultDuration:1,calls:[[{translateY:"100%"},1]]}),$.Velocity.RegisterEffect("translateNone",{defaultDuration:1,calls:[[{translateY:"0",opacity:"1",scale:"1",rotateX:"0",boxShadowBlur:"0"},1]]}),$.Velocity.RegisterEffect("scaleDown",{defaultDuration:1,calls:[[{opacity:"0",scale:"0.7",boxShadowBlur:"40px"},1]]}),$.Velocity.RegisterEffect("rotation",{defaultDuration:1,calls:[[{opacity:"0",rotateX:"90",translateY:"-100%"},1]]}),$.Velocity.RegisterEffect("rotation.scroll",{defaultDuration:1,calls:[[{opacity:"0",rotateX:"90",translateY:"0"},1]]}),$.Velocity.RegisterEffect("scaleDown.moveUp",{defaultDuration:1,calls:[[{translateY:"-10%",scale:"0.9",boxShadowBlur:"40px"},.2],[{translateY:"-100%"},.6],[{translateY:"-100%",scale:"1",boxShadowBlur:"0"},.2]]}),$.Velocity.RegisterEffect("scaleDown.moveUp.scroll",{defaultDuration:1,calls:[[{translateY:"-100%",scale:"0.9",boxShadowBlur:"40px"},.6],[{translateY:"-100%",scale:"1",boxShadowBlur:"0"},.4]]}),$.Velocity.RegisterEffect("scaleUp.moveUp",{defaultDuration:1,calls:[[{translateY:"90%",scale:"0.9",boxShadowBlur:"40px"},.2],[{translateY:"0%"},.6],[{translateY:"0%",scale:"1",boxShadowBlur:"0"},.2]]}),$.Velocity.RegisterEffect("scaleUp.moveUp.scroll",{defaultDuration:1,calls:[[{translateY:"0%",scale:"0.9",boxShadowBlur:"40px"},.6],[{translateY:"0%",scale:"1",boxShadowBlur:"0"},.4]]}),$.Velocity.RegisterEffect("scaleDown.moveDown",{defaultDuration:1,calls:[[{translateY:"10%",scale:"0.9",boxShadowBlur:"40px"},.2],[{translateY:"100%"},.6],[{translateY:"100%",scale:"1",boxShadowBlur:"0"},.2]]}),$.Velocity.RegisterEffect("scaleDown.moveDown.scroll",{defaultDuration:1,calls:[[{translateY:"100%",scale:"0.9",boxShadowBlur:"40px"},.6],[{translateY:"100%",scale:"1",boxShadowBlur:"0"},.4]]}),$.Velocity.RegisterEffect("scaleUp.moveDown",{defaultDuration:1,calls:[[{translateY:"-90%",scale:"0.9",boxShadowBlur:"40px"},.2],[{translateY:"0%"},.6],[{translateY:"0%",scale:"1",boxShadowBlur:"0"},.2]]}),$.Velocity.RegisterEffect("translateUp.delay",{defaultDuration:1,calls:[[{translateY:"0%"},.8,{delay:100}]]}),$.Velocity.RegisterEffect("hide.scaleUp",{defaultDuration:1,calls:[[{opacity:"0",scale:"1.2"},1]]}),$.Velocity.RegisterEffect("hide.scaleDown",{defaultDuration:1,calls:[[{opacity:"0",scale:"0.8"},1]]}),$.Velocity.RegisterEffect("translateUp.half",{defaultDuration:1,calls:[[{translateY:"-50%"},1]]}),angular.module("winwinsApp",["ngAnimate","ngCookies","ngResource","ngMessages","ngFileUpload","ngSanitize","ngTouch","ngTagsInput","ui.router","ui.bootstrap","satellizer","config","infinite-scroll","pascalprecht.translate","headroom","720kb.socialshare","truncate","angular-loading-bar","frapontillo.bootstrap-switch"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(a,b,c){function d(a,b,c,d){var e=a.defer();return c.isAuthenticated()?e.resolve():(console.dir(d),b.path("/signin")),e.promise}c.otherwise("/"),b.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("signUp",{url:"/signup",templateUrl:"views/signup.html",controller:"SignUpCtrl"}).state("logout",{url:"/logout",template:null,controller:"LogoutCtrl"}).state("profile",{url:"/profile",templateUrl:"views/user/profile.html",controller:"ProfileCtrl"}).state("profile_notificaciones",{url:"/notificaciones",templateUrl:"views/user/user_notificaciones.html",controller:"ProfileNotificaciones"}).state("cancel-account",{url:"/cancel-account",templateUrl:"views/user/cancel_account.html",controller:"cancel-account"}).state("account",{url:"/account",templateUrl:"views/user/account.html",controller:"MainCtrl"}).state("winwin",{url:"/winwin",templateUrl:"views/winwin.html",controller:"WinwinCtrl"}).state("winwin-new",{url:"/winwin-new",templateUrl:"views/winwin/edit.html",controller:"winwin-edit",resolve:{loginRequired:d}}).state("winwin-first-post",{url:"/winwin-first-post/:winwinId",templateUrl:"views/winwin/first_post.html",controller:"winwin-first-post"}).state("winwin-promote",{url:"/winwin-promote/:winwinId",templateUrl:"views/winwin/promote.html",controller:"winwin-promote"}).state("winwin-list",{url:"/winwin-list",templateUrl:"views/winwin/list.html",controller:"winwin-list"}).state("winwin-search",{url:"/winwin-search",templateUrl:"views/winwin/search.html",controller:"winwin-search"}).state("winwin-view",{url:"/winwin-view/:winwinId?actionJoin",templateUrl:"views/winwin-tabs/view.html",controller:"winwin-tabs"}).state("winwin-left",{templateUrl:"views/winwin-tabs/ww-left.html",url:"/winwin-left/:winwinId",controller:"winwin-left"}).state("winwin-joined",{templateUrl:"views/winwin-tabs/ww-joined.html",url:"/winwin-joined/:winwinId",controller:"winwin-joined"}).state("winwin-sponsored",{templateUrl:"views/winwin-tabs/ww-sponsored.html",url:"/winwin-sponsored/:winwinId",controller:"winwin-sponsored"}).state("group-sponsored",{templateUrl:"views/group/group-sponsored.html",url:"/group-sponsored/:groupId",controller:"group-sponsored"}).state("winwin-muro",{templateUrl:"views/winwin-view/ww-wall.html",url:"/winwin-view/:winwinId",controller:"winwin-muro"}).state("winwin-members",{templateUrl:"views/winwin-view/ww-users.html",
url:"/winwin-view/:winwinId",controller:"winwin-members"}).state("winwin-sponsors",{templateUrl:"views/winwin-view/ww-sponsors.html",url:"/winwin-view/:winwinId",controller:"winwin-sponsors"}).state("admin_campanada",{templateUrl:"views/winwin-view/ww-campanada.html",url:"/winwin-view/:winwinId",controller:"winwin-campanada"}).state("winwin-view.admin_configuracion",{templateUrl:"views/winwin/admin_configuracion.html",controller:"winwin-configuracion"}).state("winwin-view.admin_patrocinio",{templateUrl:"views/winwin/admin_solicitud_patrocinio.html",controller:"winwin-patrocinio"}).state("winwin-view.admin_miembros",{templateUrl:"views/winwin/admin_participantes.html",controller:"winwin-miembros"}).state("winwin-view.winwin-sponsor-request",{templateUrl:"views/winwin/admin_solicitud_patrocinio.html",controller:"winwin-sponsor-request"}).state("createWW",{url:"/createww",templateUrl:"views/createWW.html",controller:"CreateWWCtrl"}).state("createWWid",{url:"/createwwid",templateUrl:"views/createWWid.html",controller:"CreateWWCtrl"}).state("signIn",{url:"/signin",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("success-login",{url:"/success-login",templateUrl:"views/login_success.html",controller:"SuccessLogin"}).state("failure-login",{url:"/fail-login",templateUrl:"views/login_failure.html",controller:"FailureLogin"}).state("activateWW",{url:"/activate",templateUrl:"views/activateWW.html",controller:"ActivateWWCtrl"}).state("promote",{url:"/promote",templateUrl:"views/promote.html",controller:"ActivateWWCtrl"}).state("members",{url:"/members",templateUrl:"views/members.html",controller:"MembersCtrl"}).state("comments",{url:"/comments",templateUrl:"views/comments.html",controller:"WinwinCtrl"}).state("group-view",{url:"/group-view/:groupId",templateUrl:"views/group/view.html",controller:"group-view"}).state("group-new",{url:"/group-new",templateUrl:"views/group/edit.html",controller:"group-edit"}).state("group-promote",{url:"/group-promote/:groupId",templateUrl:"views/group/promote.html",controller:"group-promote"}).state("group-list",{url:"/group-list",templateUrl:"views/group/list.html",controller:"group-list"}).state("user-view",{url:"/user-view/:userId",templateUrl:"views/user/profile.html",controller:"user-view"}).state("user-list",{url:"/user-list",templateUrl:"views/user/list.html",controller:"user-list"}).state("sponsor-view",{url:"/sponsor-view/:sponsorId",templateUrl:"views/sponsor/view.html",controller:"sponsor-view"}).state("sponsor-signup",{url:"/sponsor-signup",templateUrl:"views/sponsor/signup.html",controller:"sponsor-signup"}).state("sponsor-new",{url:"/sponsor-new",templateUrl:"views/sponsor/signup.html",controller:"sponsor-signup"}).state("user-search-list",{url:"/search/user/:query",templateUrl:"views/search/list_user.html",controller:"search-list-user"}).state("search-list",{url:"/search/:query",templateUrl:"views/search/list.html",controller:"search-list"}).state("sponsor-list",{url:"/sponsor-list",templateUrl:"views/sponsor/list.html",controller:"sponsor-list"}).state("terms",{url:"/site/terms",templateUrl:"views/site/terms.html"}).state("contact",{url:"/site/contact",templateUrl:"views/site/contact.html",controller:"contact-controller"}).state("how",{url:"/site/how",templateUrl:"views/site/how.html"}).state("about",{url:"/site/about",templateUrl:"views/site/about.html"}),d.$inject=["$q","$location","$auth","$state"]}]).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1,a.includeBar=!0}]).config(["$authProvider","api_host",function(a,b){a.baseUrl=b+"/",a.httpInterceptor=!0,a.facebook({clientId:"1082199191794840",scope:"email,public_profile"}),a.google({clientId:"313110710680-p22p1s5brqn7tfaqj9v16u67bic5smqk.apps.googleusercontent.com"}),a.yahoo({clientId:"dj0yJmk9SDVkM2RhNWJSc2ZBJmQ9WVdrOWIzVlFRMWxzTXpZbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD0yYw--"}),a.twitter({url:"/auth/twitter"})}]).config(["$translateProvider",function(a){a.useMissingTranslationHandlerLog(),a.useUrlLoader("/api/translation"),a.preferredLanguage("es_ES")}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).constant("LOCALES",{locales:{es_ES:"Espaol",en_US:"English"},preferredLocale:"es_ES"}).controller("Ctrl",["$scope","$location","$window",function(a,b,c){a.$on("$locationChangeStart",function(c,d,e){a.startPath=b.path(),a.startNewUrl=d,a.startOldUrl=e}),a.$on("$locationChangeSuccess",function(c,d,e){a.successPath=b.path(),a.successNewUrl=d,a.successOldUrl=e}),a.back=function(){c.history.back()},a.forward=function(){c.history.forward()}}]).directive("dynamicBackground",[function(){return{restrict:"A",link:function(a,b,c){a.setBg=function(){angular.element(b[0]).css({"background-color":c.backgroundColor,"background-repeat":c.backgroundRepeat,"background-position":c.backgroundPosition,"background-attachment":c.backgroundAttachment,"background-origin":c.backgroundOrigin,"background-clip":c.backgroundClip,background:"linear-gradient(rgba(0, 0, 0, 0.73), rgba(154, 148, 120, 0.0980392)),url("+c.backgroundImage+")","background-size":"cover"})},a.launchDynamicBg=function(){c.backgroundOnEvent?angular.element(b[0]).bind(c.backgroundOnEvent,function(){a.setBg()}):a.setBg()},angular.forEach(["backgroundImage","backgroundColor","backgroundSize","backgroundPosition","backgroundClip","backgroundAttachment","backgroundOnEvent","backgroundRepeat","backgroundOrigin","background"],function(b){c.$observe(b,function(b){b&&a.launchDynamicBg()})})}}}]).run(["$rootScope","$templateCache","$timeout",function(a,b,c){console.log("run"),c(function(){window.loading_screen.finish()},2e3),a.$on("$routeChangeStart",function(a,c,d){"undefined"!=typeof d&&b.remove(d.templateUrl)})}]),angular.module("winwinsApp").controller("MainCtrl",["$scope","$auth","$http","$state","$timeout","Winwin","api_host","$uibModal",function(a,b,c,d,e,f,g,h){a.winwins=[],a.main_sponsors=[],a.all_winwins=[],a.popSponsor=function(){return a.main_sponsors.length?a.main_sponsors.pop():!1},c.get(g+"/api/sponsors/main").success(function(b){a.main_sponsors=b,f.query(function(b){a.all_winwins=b,a.winwins=[];var c=0;_.each(a.all_winwins,function(b){c+=1,c%3==0&&a.winwins.push(_.extend(a.popSponsor(),{is_sponsor:!0})),a.winwins.push(_.extend(b,{is_sponsor:!1}))})})}),a.isAuthenticated=function(){return b.isAuthenticated()},a.goControlPanel=function(){d.go("account")},a.join=function(e){b.isAuthenticated()?c.get(g+"/api/winwins/join/"+e).success(function(b){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0},function(){a.view(e)})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})}):d.go("signIn")},a.viewProfile=function(a){d.go("user-view",{userId:a})},a.viewSponsor=function(a){d.go("sponsor-view",{sponsorId:a})},a.view=function(a){console.log("view "+a),d.go("winwin-view",{winwinId:a})},a.openShare=function(a){$("#socialModal").modal("show"),console.log("winwin_id: "+a)},a.filter=function(b){a.is_filtered="all"!==b,console.log(b),a.is_filtered?(console.log("filter"),a.winwins=_.filter(a.all_winwins,function(a){return a.mark==b})):a.winwins=a.all_winwins},a.visible_search=!1,a.showSearch=function(){a.visible_search=!0,jQuery("#slider").stop().animate({"margin-top":"0"})>10,console.log("visible search")},a.openSocialModal=function(b){a.toShare=b;h.open({animation:!1,windowTopClass:"modal-background",templateUrl:"winwinShareModal.html",controller:"ModalInstanceCtrl",resolve:{toShare:function(){return a.toShare}}})}}]).controller("ModalInstanceCtrl",["$scope","$uibModalInstance","toShare",function(a,b,c){a.toShare=c}]).controller("main-search-controller",["$scope","$state",function(a,b){a.search=function(){console.log("query: "+a.term),b.go("search-list",{query:a.term,winwin:!0,user:!0,group:!0,sponsor:!0})},a.searchUsers=function(){b.go("user-search-list",{query:a.term})}}]).controller("contact-controller",["$scope","$auth","$http","$state","api_host",function(a,b,c,d,e){}]),angular.module("winwinsApp").controller("SignUpCtrl",["$scope","$rootScope","$timeout","$state","$auth",function(a,b,c,d,e){a.show_signup=!0,a.redirect_message=!1,a.signup=function(){e.signup({username:a.name,email:a.email,password:a.password,birthdate:a.birthdate,name:a.name,lastname:a.lastname,language_code:"ES"}).then(function(f){e.login({email:a.email,password:a.password}).then(function(e){b.currentUser=e,b.$broadcast("is_logged",!0),a.show_signup=!1,a.redirect_message=!0,c(function(){if(b.returnState)switch(b.returnState.state){case"ww-join":d.go("winwin-view",{winwinId:b.returnState.parameters.winwinId,actionJoin:!0});break;default:d.go("main")}else d.go("main")},3e3)})})["catch"](function(a){console.dir(a);var b="Error en su registracion";a.data&&"email_already_taken"==a.data.message&&(b="El email ya existe en nuestra base. Intenta ingresar con l"),swal({title:"ADVERTENCIA",text:b,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0}),d.go("signUp")})},a.authenticate=function(f){e.authenticate(f).then(function(e){b.currentUser=e,b.$broadcast("is_logged",!0),a.show_signup=!1,a.provider=f,a.redirect_message=!0,c(function(){if(b.returnState)switch(b.returnState.state){case"ww-join":d.go("winwin-view",{winwinId:b.returnState.parameters.winwinId,actionJoin:!0});break;default:d.go("main")}else d.go("main")},3e3)})["catch"](function(a){d.go("failure-login"),swal({title:"ADVERTENCIA",text:"Error en su autenticacin",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})}}]).controller("sponsor-signup",["$scope","$rootScope","$timeout","$state","$auth",function(a,b,c,d,e){a.show_signup=!0,a.redirect_message=!1,a.signup=function(){e.signup({username:a.name,email:a.email,password:a.password,birthdate:a.birthdate,name:a.name,is_sponsor:!0,sponsor_organization:a.sponsor_organization,lastname:a.lastname,language_code:"ES"}).then(function(f){e.login({email:a.email,password:a.password}).then(function(e){b.currentUser=e,b.$broadcast("is_logged",!0),a.show_signup=!1,a.redirect_message=!0,c(function(){d.go("main")},3e3)})})["catch"](function(a){swal({title:"ADVERTENCIA",text:"Error en su registracion",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0}),d.go("signUp")})},a.authenticate=function(f){e.authenticate(f).then(function(e){b.currentUser=e,b.$broadcast("is_logged",!0),a.show_signup=!1,a.provider=f,a.redirect_message=!0,c(function(){if(b.returnState)switch(b.returnState.state){case"ww-join":d.go("winwin-view",{winwinId:b.returnState.parameters.winwinId,actionJoin:!0});break;default:d.go("main")}else d.go("main")},3e3)})["catch"](function(a){d.go("failure-login"),swal({title:"ADVERTENCIA",text:"Error en su autenticacin",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})}}]),angular.module("winwinsApp").controller("winwin-tabs",["$scope","$http","$state","$sce","$stateParams","$timeout","$anchorScroll","$location","$auth","$uibModal","$rootScope","Winwin","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.is_admin=!1,a.current_view="home",a.setCurrentView=function(b){a.current_view=b,a.is_admin=!1},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){console.log("is admin? "+a.isAdmin),a.isAdmin&&(a.is_admin=!0)},a.isAdmin=!1,a.winwin_view=!0,a.show_closing_date=!1,a.show_description=!1,a.show_details=function(b){a.show_description=b},a.posts=[],a.last={},a.getPosts=function(){b.get(n+"/api/posts/winwin/"+e.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last})},a.winwin={},a.getWinwin=function(){a.winwin=l.get({id:e.winwinId},function(b){a.winwin=b,a.calculate_time(),a.winwin.is_moderator&&(a.isAdmin=!0),console.log(e.actionJoin),e.actionJoin&&a.join(),"SUCCESSFUL"==a.winwin.status&&f(function(){a.setup_components()},1e3)})},a.isSponsor=!1,m.getProfile().success(function(b){b&&(a.user_id=b.user?b.user.id:!1,a.account=b.account,a.profile=b.profile,a.sponsor=b.sponsor,a.isSponsor=b.is_sponsor)}),a.duration_days=0,a.duration_hours=0,a.duration_minutes=0,a.calculate_time=function(){var b=moment(),c=moment(a.winwin.closing_date);if(a.show_closing_date=!1,a.winwin.closing_date&&c.isAfter(b)){a.duration_days=c.diff(b,"days"),a.duration_hours=c.diff(b.add(a.duration_days,"days"),"hours");var d=c.diff(b.add(a.duration_days,"days").add(a.duration_hours,"hours"),"minutes");a.duration_minutes=0>d?0:d,a.show_closing_date=!0}else a.winwin.closing_date&&!c.isAfter(b)&&(a.is_finished=!0)},a.getWinwin(),a.viewProfile=function(a){c.go("user-view",{userId:a})},a.join=function(){i.isAuthenticated()?b.get(n+"/api/winwins/join/"+a.winwin.id).success(function(b){c.go("winwin-joined",{winwinId:a.winwin.id,winwinName:a.winwin.title})}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al unirse.",type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):(k.returnState={state:"ww-join",parameters:{winwinId:a.winwin.id}},c.go("signIn"))},a.pass=function(){c.go("winwin-list")},a.left=function(){b.get(n+"/api/winwins/left/"+a.winwin.id).success(function(b){c.go("winwin-left",{winwinId:a.winwin.id,winwinName:a.winwin.title})}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al abandonar.",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.askForSponsored=function(){swal({title:"SOLICITAR PATROCINIO",text:"Envia un mensaje de solicitud al creador del Winwin",type:"input",showCancelButton:!0,closeOnConfirm:!0,inputPlaceholder:"Mensaje de solicitud"},function(d){return d===!1?!1:""===d?!1:(b.post(n+"/api/winwins/sponsor_request/"+a.winwin.id,{body:d}).success(function(b){c.go("winwin-sponsored",{winwinId:a.winwin.id,winwinName:a.winwin.title})}).error(function(a){swal({title:"Error",text:"Error en la peticion.",type:"warning",showCancelButton:!1,closeOnConfirm:!0})}),!0)})},a.getIframeSrc=function(a){return d.trustAsResourceUrl("https://www.youtube.com/embed/"+a+"?autoplay=1")},a.openMailModal=function(b){a.toShare=b;j.open({animation:!1,windowTopClass:"modal-background",templateUrl:"myMailShare.html",controller:"ModalMailCtrl",resolve:{toShare:function(){return a.toShare},mails:function(){return{}}}})},a.setup_components=function(){jQuery.fn.rating=function(){function a(a,b,c,d){var e=jQuery(a).find('[data-value="'+b+'"]');e.removeClass(d).addClass(c),e.prevAll("[data-value]").removeClass(d).addClass(c),e.nextAll("[data-value]").removeClass(c).addClass(d)}function b(a,b,c){var d=jQuery(a);d.find("[data-value]").removeClass(b).addClass(c)}function c(a,b){a.val(b).trigger("change"),b===a.data("empty-value")?a.siblings(".rating-clear").hide():a.siblings(".rating-clear").show()}var d;for(d=this.length-1;d>=0;d--){var e,f,g=jQuery(this[d]),h=g.data("max")||5,i=g.data("min")||0,j=g.val()||0,k=g.data("icon-lib")||"glyphicon",l=g.data("active-icon")||"glyphicon-star",m=g.data("inactive-icon")||"glyphicon-star-empty",n=g.data("clearable")||null,o=g.data("clearable-icon")||"glyphicon-remove",p="";for(f=i;h>=f;f++)p+=j>=f?['<i class="',k," ",l,'" data-value="',f,'"></i>'].join(""):['<i class="',k," ",m,'" data-value="',f,'"></i>'].join("");n&&(p+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="',k," ",o,'"></span> ',n,"</a>"].join(""));var q=g.clone(!0).addClass("hidden").data("max",h).data("min",i).data("icon-lib",k).data("active-icon",l).data("inactive-icon",m);e=['<div class="rating-input">',p,"</div>"].join(""),g.parents(".rating-input").length<=0&&g.replaceWith(jQuery(e).append(q))}jQuery(".rating-input").on("mouseenter","[data-value]",function(){var b=jQuery(this),c=b.siblings("input");a(b.closest(".rating-input"),b.data("value"),c.data("active-icon"),c.data("inactive-icon"))}).on("mouseleave","[data-value]",function(){var c=jQuery(this),d=c.siblings("input"),e=d.val(),f=d.data("min"),g=d.data("max"),h=d.data("active-icon"),i=d.data("inactive-icon");e>=f&&g>=e?a(c.closest(".rating-input"),e,h,i):b(c.closest(".rating-input"),h,i)}).on("click","[data-value]",function(a){var b=jQuery(this),d=b.data("value"),e=b.siblings("input");return c(e,d),a.preventDefault(),!1}).on("click",".rating-clear",function(a){var d=jQuery(this),e=d.siblings("input"),f=e.data("active-icon"),g=e.data("inactive-icon");return c(e,e.data("empty-value")),b(d.closest(".rating-input"),f,g),a.preventDefault(),!1}).each(function(){var c=jQuery(this).find("input"),d=c.val(),e=c.data("min"),f=c.data("max");""!==d&&+d>=e&&f>=+d?(a(this,d),jQuery(this).find(".rating-clear").show()):(c.val(c.data("empty-value")),b(this))})},jQuery("#review").rating(),jQuery("#review").on("change",function(b,c){a.winwin_rate=jQuery("#review").val(),a.$apply(),a.rateIt()})},a.rateIt=function(){b.post(n+"/api/winwins/"+a.winwin.id+"/rate",{rate:a.winwin_rate}).success(function(b){a.winwin.already_rated=!0}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al concretar la operacin",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.formattedCategories=function(a){return a?_.pluck(a,"description").join("\n"):""}}]).controller("winwin-left",["$scope","$http","$state","$stateParams","$timeout","Winwin",function(a,b,c,d,e,f){a.getWinwin=function(){a.winwin=f.get({id:d.winwinId},function(b){a.title=b.title,e(function(){c.go("main")},1e3)})},a.getWinwin()}]).controller("winwin-joined",["$scope","$http","$state","$stateParams","$timeout","Winwin",function(a,b,c,d,e,f){a.getWinwin=function(){a.winwin=f.get({id:d.winwinId},function(b){a.title=b.title,e(function(){c.go("winwin-promote",{winwinId:d.winwinId})},1e3)})},a.getWinwin()}]).controller("winwin-sponsored",["$scope","$http","$state","$stateParams","$timeout","Winwin",function(a,b,c,d,e,f){a.getWinwin=function(){a.winwin=f.get({id:d.winwinId},function(b){a.title=b.title,e(function(){c.go("winwin-view",{winwinId:d.winwinId})},1e3)})},a.getWinwin()}]).controller("winwin-edit",["$scope","$state","$auth","$timeout","Upload","Winwin","Interest","api_host",function(a,b,c,d,e,f,g,h){a.winwin=new f({}),a.interests=[],a.scopes=["GLOBAL","LOCAL"],a.first_stage=!0,a.second_stage=!1,a.winwin.closing_date=new Date,a.setup_components=function(){jQuery('[data-toggle="popover"]').popover(),jQuery('[data-toggle="tooltip"]').tooltip(),jQuery(".datepicker").pickadate({selectMonths:!0,selectYears:15}),jQuery("input#input_text, textarea#textarea1").characterCounter(),jQuery("input#input_text, textarea#textarea2").characterCounter(),jQuery(".modal-trigger").leanModal()},d(function(){a.setup_components()},1e3),g.query(function(b){a.interests=b}),a.doValidateBasic=function(){return!0},a.doValidateWinwin=function(){return a.winwin.gallery_image=a.image_gallery_selected,!a.saving},a.persistBasic=function(){a.doValidateBasic()&&(a.first_stage=!1,a.second_stage=!0,console.log("Second Stage: "+a.second_stage),$("html, body").animate({scrollTop:1},0))},a.doSave=function(){a.doValidateWinwin()&&(a.saving=!0,a.winwin.$save(function(c){b.go("winwin-first-post",{winwinId:a.winwin.id})}))},a.uploading=!1,a.uploadFiles=function(b){a.f=b,b&&!b.$error&&(b.upload=e.upload({url:h+"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,d(function(){b.result=c.data,a.winwin.image=c.data.filename,a.preview_image="http://images.dev-winwins.net/smart/"+a.winwin.image})},function(b){a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data,swal({title:"Error",text:"Error al subir archivo",type:"warning",showCancelButton:!1,closeOnConfirm:!0}))}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))})),"maxSize"==b.$error&&swal({title:"Error",text:"La imagen es demasiado grande",type:"warning",showCancelButton:!1,closeOnConfirm:!0})},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){swal({title:"Video Link",text:"Ingresa direccin de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c&&a.$apply(function(){a.winwin.video=c,a.preview_image="http://img.youtube.com/vi/"+c+"/default.jpg"})}})},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!a.gallery_picker,a.image_gallery_selected||jQuery("#image-gallery").imagepicker({changed:function(b,c){a.image_gallery_selected=c,a.$apply(function(){a.gallery_picker=!1})}})},a.preview_image="",a.$watch("image_gallery_selected",function(){a.image_gallery_selected&&(a.preview_image="http://images.dev-winwins.net/smart/"+a.image_gallery_selected,a.$apply())})}]).controller("winwin-first-post",["$scope","$stateParams","$http","$state","$auth","$sce","$timeout","Winwin","Account","Upload","Post","api_host",function(a,b,c,d,e,f,g,h,i,j,k,l){a.ww_saved=!1,a.post=new k({}),a.profile={},a.winwin={},i.getProfile().success(function(b){b&&(a.profile=b.profile)}),h.get({id:b.winwinId},function(b){a.winwin=b,a.post.reference_id=b.id,a.post.type="WINWIN"}),a.submitPost=function(){a.post.$save(function(b){c.get(l+"/api/winwins/activate/"+a.winwin.id).success(function(b){d.go("winwin-promote",{winwinId:a.winwin.id})}).error(function(a){swal({title:"Error",text:"Error al enviar post",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})})},a["continue"]=function(){d.go("winwin-view",{winwinId:a.winwin.id})},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){swal({title:"Video Link",text:"Ingresa direccin de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.post.media_type="VIDEO",a.post.media_path=c}):swal({title:"Incorrecto",text:"La direccion ingresada no es correcta",type:"warning"})}})},a.getIframeSrc=function(a){return f.trustAsResourceUrl("http://www.youtube.com/embed/"+a)},a.uploading=!1,a.uploadFiles=function(b){a.f=b,b&&!b.$error&&(console.log("enviando..."),b.upload=j.upload({url:l+"/api/posts/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,g(function(){b.result=c.data,a.post.media_id=c.data.media_id,a.post.media_type="IMAGE",a.post.media_path=c.data.filename})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){console.log("progress..."),a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))}}]).controller("winwin-promote",["$scope","$stateParams","$http","$state","$timeout","$uibModal","Winwin","Account",function(a,b,c,d,e,f,g,h){a.profile={},a.winwin={},h.getProfile().success(function(b){b&&(a.profile=b.profile)}),g.get({id:b.winwinId},function(b){a.winwin=b}),a.goView=function(){a.promote=!1,a.success=!0,e(function(){d.go("winwin-view",{winwinId:a.winwin.id})},1e3)},a.promote=!0,a.success=!1,a.openMailModal=function(b){a.toShare=b;f.open({animation:!1,windowTopClass:"modal-background",templateUrl:"myMailShare.html",controller:"ModalMailCtrl",resolve:{toShare:function(){return a.toShare},mails:function(){return{}}}})}}]).controller("winwin-list",["$scope","$http","$auth","$state","$uibModal","WinwinPaginate","api_host",function(a,b,c,d,e,f,g){a.winwins=new f,a.doFilter=function(b){console.log(b),a.winwins.setFilter(b),a.winwins.nextPage()},a.join=function(e){c.isAuthenticated()?b.get(g+"/api/winwins/join/"+e).success(function(b){swal({title:"info",text:"Te has unido al Winwin",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.view(e)}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al unirse",type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):d.go("signIn")},a.view=function(a){console.log("view "+a),d.go("winwin-view",{winwinId:a})},a.openSocialModal=function(b){a.toShare=b;e.open({animation:!1,windowTopClass:"modal-background",templateUrl:"winwinShareModal.html",controller:"ModalInstanceCtrl",resolve:{toShare:function(){return a.toShare}}})}}]).controller("winwin-search",["$scope","$http","api_host",function(a,b,c){a.winwins=[],a.do_search=function(){b.get(c+"/api/winwins/search/",{params:{q:a.query}}).success(function(b){a.winwins=b}).error(function(a){})}}]).controller("winwin-members",["$scope","$http","$timeout","$stateParams","$state","Winwin","api_host",function(a,b,c,d,e,f,g){a.members_view=!0,a.current="all",c(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})},1e3),a.classType=function(a){return(a.pivot.moderator?"activator":"")+" "+(a.pivot.creator?"creator":"")},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},a.makeNormal=function(d){a.activated_name=d.username,b.post(g+"/api/winwins/"+a.winwin.id+"/state/normal/"+d.id).success(function(b){a.in_message=!0,a.normal_success=!0,c(function(){e.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3)}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al quitar privilegios",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.makeActivator=function(d){a.activated_name=d.username,b.post(g+"/api/winwins/"+a.winwin.id+"/state/activator/"+d.id).success(function(b){a.in_message=!0,a.activator_success=!0,c(function(){e.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3)}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al agregar privilegios",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.follow=function(a){b.get(g+"/api/users/follow/"+a.id).success(function(b){swal({title:"info",text:"Siguiendo!",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.following=!0,a.followers_amount=a.followers_amount+1}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al seguir",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.view=function(a){e.go("user-view",{userId:a.id})},a.unfollow=function(a){b.get(g+"/api/users/unfollow/"+a.id).success(function(b){swal({title:"info",text:"Has dejado de seguir al usuario",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.following=!1,a.followers_amount=a.followers_amount-1}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al dejar de seguir",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-sponsors",["$scope","$http","$timeout","$stateParams","Winwin","api_host",function(a,b,c,d,e,f){a.current="all",a.sponsors_view=!0,a.sponsors=[],a.getWinwin=function(){b.get(f+"/api/winwins/"+d.winwinId+"/sponsors").success(function(b){a.sponsors=_.filter(b,function(a){return 1==a.pivot.ww_accept&&1==a.pivot.sponsor_accept}),c(function(){$(".grid-sponsors").isotope({itemSelector:".sponsor-item",masonry:{columnWidth:380}})},1e3)})},a.getWinwin(),a.classType=function(a){return a.pivot.promoted?"promoted":""},a.filter=function(b){a.current=b,$(".grid-sponsors").isotope({filter:"all"==b?"*":"."+b})},a.follow=function(a){b.get(f+"/api/sponsors/follow/"+a.id).success(function(b){swal({title:"info",text:"Siguiendo!",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.following=!0}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al seguir",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.view=function(a){$state.go("sponsor-view",{userId:a.id})},a.unfollow=function(a){b.get(f+"/api/users/unfollow/"+a.id).success(function(b){swal({title:"info",text:"Has dejado de seguir al usuario",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.following=!1}).error(function(a){swal({title:"ADVERTENCIA",text:"Error al dejar de seguir",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-sponsors-to-request",["$scope","$http","$state","$timeout","$stateParams","Winwin","api_host",function(a,b,c,d,e,f,g){a.sponsors=[],a.getCandidates=function(){b.get(g+"/api/winwins/"+e.winwinId+"/sponsors/candidates").success(function(b){a.sponsors=b,d(function(){$(".grid-sponsors").isotope({itemSelector:".sponsor-item",masonry:{columnWidth:380}})},1e3)})},a.getCandidates(),a.view=function(a){c.go("sponsor-view",{userId:a.id})},a.request_success=!1,a.requestSponsor=function(e){a.sponsor_name=e.name,swal({title:"SOLICITAR PATROCINIO",text:"Envia un mensaje de solicitud al Sponsor",type:"input",showCancelButton:!0,closeOnConfirm:!0,inputPlaceholder:"Mensaje de solicitud"},function(f){return f===!1?!1:""===f?!1:(b.post(g+"/api/winwins/"+a.winwin.id+"/sponsor/request/"+e.id,{body:f}).success(function(b){a.request_success=!0,d(function(){c.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3),c.go("winwin-sponsored",{winwinId:a.winwin.id,winwinName:a.winwin.title})}).error(function(a){swal({title:"Error",text:"Error al solicitar sponsoreo",type:"warning",showCancelButton:!1,closeOnConfirm:!0})}),!0)})}}]).controller("winwin-sponsors-requests",["$scope","$http","$state","$timeout","$stateParams","Winwin","api_host",function(a,b,c,d,e,f,g){a.sponsors=[],a.getRequests=function(){b.get(g+"/api/winwins/"+e.winwinId+"/sponsors").success(function(b){a.sponsors=_.filter(b,function(a){return 0==a.pivot.ww_accept&&1==a.pivot.sponsor_accept}),d(function(){$(".grid-sponsors").isotope({itemSelector:".sponsor-item",masonry:{columnWidth:380}})},1e3)})},a.getRequests(),a.view=function(a){c.go("sponsor-view",{userId:a.id})},a.accept_success=!1,a.acceptSponsor=function(e){a.sponsor_name=e.name,b.post(g+"/api/winwins/"+a.winwin.id+"/sponsor/"+e.id+"/accept").success(function(b){a.accept_success=!0,d(function(){c.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3)}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-muro",["$scope","$http","$auth","$stateParams","$sce","$timeout","$uibModal","Winwin","Account","Upload","Post","api_host",function(a,b,c,d,e,f,g,h,i,j,k,l){a.muro_view=!0,a.isAuthenticated=c.isAuthenticated(),a.winwin={},a.getWinwin=function(){console.log("Winwin fetch"),a.winwin=h.get({id:d.winwinId},function(b){a.winwin=b,a.polls=a.winwin.polls,a.loadPolls(),a.getPosts()})},a.loadPolls=function(){_.each(a.polls,function(a){b.get(l+"/api/polls/"+a.id).success(function(b){a.data=b,a.data.loaded=!0})})},a.selectAnswer=function(a,b){a.selected_answer=b.id},a.percentage_votes=function(a,b){if(!a.data.total_votes)return 0;var c=100*b.vote_count/a.data.total_votes;return c},a.votePoll=function(c){b.post(l+"/api/poll/"+c.id+"/vote/"+c.selected_answer,{positive:!0}).success(function(b){a.loadPolls()}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.getPosts=function(){console.log("get posts"),b.get(l+"/api/posts/winwin/"+d.winwinId+"/posts").success(function(b){a.posts=b.posts,a.last=b.last,a.post=new k({}),a.editing=!1})},a.getWinwin(),a.post=new k({}),a.profile={},a.isSponsor=!1,i.getProfile().success(function(b){b&&(a.profile=b.profile,a.isSponsor=b.sponsor)}),a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){console.log("set video"),swal({title:"Video Link",text:"Ingresa direccin de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.post.media_type="VIDEO",a.post.media_path=c}):(console.log("Wrong url"),swal({title:"Incorrecto",text:"La direccion ingresada no es correcta",type:"warning"}))}})},a.getIframeSrc=function(a){return e.trustAsResourceUrl("http://www.youtube.com/embed/"+a)},a.uploading=!1,a.uploadFiles=function(b){a.post.media_type="IMAGE",a.f=b,console.log(b.$error),b&&!b.$error&&(a.uploading=!0,console.log("enviando..."),b.upload=j.upload({url:l+"/api/posts/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,f(function(){b.result=c.data,
a.$apply(function(){a.post.media_id=c.data.media_id,a.post.media_type="IMAGE",a.post.media_path=c.data.filename})})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,console.log("progress..."),b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.cancelEditing=function(){a.normal_size=!0,a.post=new k({}),a.editing=!1},a.sendingPost=!1,a.submitPost=function(){a.sendingPost||(a.sendingPost=!0,a.post.reference_id=a.winwin.id,a.post.type="WINWIN",a.post.$save(function(b){a.sendingPost=!1,swal({title:"Info",text:"Post enviado!",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.normal_size=!0,a.editing=!1,a.getPosts()},function(b){a.sendingPost=!1}))},a.normal_size=!0,a.editing=!1,a.min_size=function(){a.normal_size=!0},a.max_size=function(){a.normal_size=!1,a.editing=!0},a.vote=function(c,d){b.post(l+"/api/posts/"+c.id+"/vote",{positive:d}).success(function(b){a.getPosts()}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.reply=function(b){b.isReplying=!0,a.toShare=b;var c=g.open({animation:!1,windowTopClass:"modal-background",templateUrl:"commentModal.html",controller:"CommentCtrl",resolve:{post:function(){return b}}});c.result.then(function(b){a.getPosts()},function(){})},a.cancelReply=function(a){a.isReplying=!1},a.openSocialModal=function(b){a.toShare=b;g.open({animation:!1,windowTopClass:"modal-background",templateUrl:"postShareModal.html",controller:"ModalInstanceCtrl",resolve:{toShare:function(){return a.toShare}}})},a.setSticky=function(c){b.post(l+"/api/posts/"+c.id+"/sticky",{sticky:!0}).success(function(b){a.getPosts()}).error(function(a){swal({title:"Error",text:"No se pudo concretar la operacin",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unSticky=function(c){b.post(l+"/api/posts/"+c.id+"/sticky",{sticky:!1}).success(function(b){a.getPosts()}).error(function(a){swal({title:"Error",text:"No se pudo concretar la operacin",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.removePost=function(c){b.post(l+"/api/posts/"+c.id+"/remove",{sticky:!1}).success(function(b){a.getPosts()}).error(function(a){swal({title:"Error",text:"No se pudo concretar la operacin",type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("CommentCtrl",["$scope","$uibModalInstance","$http","$sce","$timeout","api_host","post","Post","Upload",function(a,b,c,d,e,f,g,h,i){a.post=g,a.comment=new h({}),a.sendingPost=!1,a.submitComment=function(){a.sendingPost||c.post(f+"/api/posts/"+a.post.id+"/comment",{content:a.comment.content,media_id:a.comment.media_id,media_type:a.comment.media_type,media_path:a.comment.media_path}).success(function(c){a.sendingPost=!1,a.comment=new h({}),a.post=c,a.comment=new h({}),b.close(!0)}).error(function(b){a.sendingPost=!1,swal({title:"Error",text:b.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){console.log("set video"),swal({title:"Video Link",text:"Ingresa direccin de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c?a.$apply(function(){a.comment.media_type="VIDEO",a.comment.media_path=c}):(console.log("Wrong url"),swal({title:"Incorrecto",text:"La direccion ingresada no es correcta",type:"warning"}))}})},a.getIframeSrc=function(a){return d.trustAsResourceUrl("http://www.youtube.com/embed/"+a)},a.uploading=!1,a.uploadFiles=function(b){a.f=b,console.log(b.$error),b&&!b.$error&&(console.log("enviando..."),b.upload=i.upload({url:f+"/api/posts/upload",file:b}),b.upload.then(function(c){console.log("success..."),a.uploading=!1,e(function(){b.result=c.data,a.comment.media_id=c.data.media_id,a.comment.media_type="IMAGE",a.comment.media_path=c.data.filename})},function(b){console.log("error..."),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,console.log("progress..."),b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))}}]).controller("winwin-campanada",["$scope","$http","$state","$stateParams","$timeout","Winwin","api_host",function(a,b,c,d,e,f,g){a.campanada_view=!0,a.campanada_success=!1,a.sentCampanada=function(){console.log("sent-campanada"),b.post("/api/winwins/campanada/"+a.winwin.id,{body:a.body}).success(function(b){a.campanada_success=!0,e(function(){c.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3)}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-poll",["$scope","$http","$state","$stateParams","$timeout","Poll","api_host",function(a,b,c,d,e,f,g){a.poll_view=!0,a.poll_success=!1,a.poll={selected:1},a.submitPoll=function(){b.post("/api/winwins/"+a.winwin.id+"/poll",a.poll).success(function(b){a.poll_success=!0,e(function(){c.go("winwin-view",{winwinId:a.winwin.id},{reload:!0})},1e3)}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-miembros",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-configuracion",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-patrocinio",["$scope","$http","$stateParams","Winwin",function(a,b,c,d){}]).controller("winwin-sponsor-request",["$scope","$http","$state","$stateParams","Winwin",function(a,b,c,d,e){a.sentRequest=function(){b.post("/api/winwins/sponsor_request/"+a.winwin.id,{body:a.body}).success(function(b){swal({title:"Info",text:"Solicitud al sponsor enviada",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),c.go("winwin-view",{winwinId:a.winwin.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]).controller("winwin-config",["$scope","$http","$state","$stateParams","api_host","Winwin",function(a,b,c,d,e,f){a.all_notifications=!1,a.toggleNotifications=function(){console.log("toggle"),a.all_notifications=!a.all_notifications,a.all_notifications&&(a.winwin.notification_user_post=!0,a.winwin.notification_new_participant=!0,a.winwin.notification_new_poll=!0,a.winwin.notification_announce=!0,a.winwin.notification_new_sponsor=!0,a.winwin.notification_closing_date=!0)},a.updateNotifications=function(){b.post(e+"/api/winwins/"+a.winwin.id+"/notifications",{notification_user_post:a.winwin.notification_user_post,notification_new_participant:a.winwin.notification_new_participant,notification_new_poll:a.winwin.notification_new_poll,notification_announce:a.winwin.notification_announce,notification_new_sponsor:a.winwin.notification_new_sponsor,notification_closing_date:a.winwin.notification_closing_date}).success(function(a){swal({title:"Info",text:"Notificaciones actualizadas",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0})})},a.closeWinwin=function(){swal({title:"SOLICITAR BAJA WINWIN",text:"Contanos tus motivos",type:"input",showCancelButton:!0,closeOnConfirm:!0,inputPlaceholder:""},function(d){return d===!1?!1:""===d?!1:(b.post(e+"/api/winwins/"+a.winwin.id+"/close",{body:d}).success(function(a){swal({title:"Info",text:"Winwin cerrado",type:"info",showCancelButton:!1,closeOnConfirm:!0}),c.go("main")}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}),!0)})}}]).controller("ModalMailCtrl",["$scope","$uibModalInstance","$http","$timeout","api_host","toShare","mails",function(a,b,c,d,e,f,g){a.toShare=f,a.success=!1,a.mails=[],a.current_mail="",a.addMail=function(){a.current_mail&&a.matchEmail(a.current_mail)&&(a.mails.push(a.current_mail),a.current_mail="")},a.removeMail=function(b){a.mails=_.without(a.mails,b)},a.sentInvitations=function(){c.post(e+"/api/winwins/"+a.toShare.id+"/share/mails",{mails:a.mails}).success(function(c){a.success=!0,d(function(){b.close()},2e3)})},a.matchEmail=function(a){var b=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;return a.match(b)}}]).controller("winwin-modify",["$scope","$state","$stateParams","$http","$auth","$timeout","Upload","Winwin","Interest","api_host",function(a,b,c,d,e,f,g,h,i,j){a.interests=[],a.scopes=["GLOBAL","REGION","COUNTRY","STATE","CITY"],a.preview_image="",a.ewinwin={},a.getWinwin=function(){a.ewinwin=h.get({id:c.winwinId},function(b){a.ewinwin=b,a.setup_components()})},a.getWinwin(),a.setup_components=function(){i.query(function(b){a.interests=b}),a.preview_image="http://images.dev-winwins.net/smart/"+a.ewinwin.image,jQuery('[data-toggle="popover"]').popover(),jQuery('[data-toggle="tooltip"]').tooltip(),jQuery("#picker_closing_date").pickadate({selectMonths:!0,selectYears:15}),jQuery("#picker_closing_date").pickadate().pickadate("picker").set("select",a.ewinwin.closing_date),jQuery("#what_we_do_textarea").val(a.ewinwin.what_we_do),jQuery("#description_textarea").val(a.ewinwin.description)},a.doValidateWinwin=function(){return!a.saving},a.updateWinwin=function(){a.doValidateWinwin()&&(a.saving=!0,d.post(j+"/api/winwins/"+a.ewinwin.id,a.ewinwin).success(function(b){swal({title:"info",text:"Los datos han sido actualizados",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.saving=!1}).error(function(b){a.saving=!1,swal({title:"Error",text:"Hubo un problema al actualizar los datos",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})}))},a.uploading=!1,a.uploadFiles=function(b){a.f=b,b&&!b.$error&&(b.upload=g.upload({url:j+"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,f(function(){b.result=c.data,a.ewinwin.image=c.data.filename,a.preview_image="http://images.dev-winwins.net/smart/"+a.ewinwin.image})},function(b){a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data,swal({title:"Error",text:"Error al subir archivo",type:"warning",showCancelButton:!1,closeOnConfirm:!0}))}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))})),"maxSize"==b.$error&&swal({title:"Error",text:"La imagen es demasiado grande",type:"warning",showCancelButton:!1,closeOnConfirm:!0})},a.matchYoutubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},a.setVideoUrl=function(){swal({title:"Video Link",text:"Ingresa direccin de video:",type:"input",inputType:"url",showCancelButton:!0,closeOnConfirm:!0},function(b){if(b){var c=a.matchYoutubeUrl(b);c&&a.$apply(function(){a.ewinwin.video=c,a.ewinwin.image="http://img.youtube.com/vi/"+c+"/default.jpg",a.preview_image="http://img.youtube.com/vi/"+c+"/default.jpg"})}})},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!a.gallery_picker,a.image_gallery_selected||jQuery("#image-gallery").imagepicker({changed:function(b,c){a.image_gallery_selected=c,a.$apply(function(){a.gallery_picker=!1})}})},a.$watch("image_gallery_selected",function(){a.image_gallery_selected&&(a.ewinwin.image=a.image_gallery_selected[0],console.log(a.ewinwin.image),a.$apply())})}]),angular.module("winwinsApp").controller("search-list",["$scope","$stateParams","$state","$http","$auth","api_host",function(a,b,c,d,e,f){console.dir(b),a.hits=[],a.winwins=[],a.users=[],a.sponsors=[],a.groups=[],d.get(f+"/api/ww/search/",{params:{q:b.query,winwin:b.winwin,user:b.user,group:b.group,sponsor:b.sponsor}}).success(function(c){a.hits=c,a.winwins=b.winwin?c.winwins||[]:[],a.users=b.user?c.users||[]:[],a.groups=b.group?c.groups||[]:[],a.sponsors=b.sponsor?c.sponsors||[]:[]}).error(function(a){console.log(a)}),a.view=function(a,b){switch(console.log("type: "+a+" - id: "+b),a){case"winwins":c.go("winwin-view",{winwinid:b});break;case"users":c.go("user-view",{userid:b});break;default:c.go("winwin-view",{winwinid:b})}},a.join=function(b){e.isauthenticated()?d.get(f+"/api/winwins/join/"+b).success(function(c){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.view(b)}).error(function(a){swal({title:"advertencia",text:a.message,type:"warning",showcancelbutton:!1,closeonconfirm:!0})}):c.go("signin")}}]).controller("search-list-user",["$scope","$stateParams","$state","$http","$auth","api_host",function(a,b,c,d,e,f){a.hits=[],a.users=[],d.get(f+"/api/ww/search/",{params:{q:b.query,winwin:b.winwin,user:b.user,group:b.group,sponsor:b.sponsor}}).success(function(b){a.hits=b,a.users=b.users}).error(function(a){console.log(a)}),a.view=function(a,b){c.go("user-view",{userid:b})},a.join=function(b){e.isauthenticated()?d.get(f+"/api/winwins/join/"+b).success(function(c){swal({title:"info",text:"winwin_join",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.view(b)}).error(function(a){swal({title:"advertencia",text:a.message,type:"warning",showcancelbutton:!1,closeonconfirm:!0})}):c.go("signin")}}]),angular.module("winwinsApp").controller("group-edit",["$scope","$state","$auth","$timeout","Upload","Group","Interest",function(a,b,c,d,e,f,g){a.group=new f({}),a.doValidate=function(){return a.group.gallery_image=a.image_gallery_selected,!0},a.first_stage=!0,a.second_stage=!1,a.doFirstStage=function(){a.first_stage=!1,a.second_stage=!0},a.doSave=function(){a.doValidate()&&a.group.$save(function(c){a.first_stage=!1,a.second_stage=!1,b.go("group-promote",{groupId:a.group.id})})},a.uploading=!1,a.uploadFiles=function(b){console.log("uploading"),a.f=b,b&&!b.$error&&(b.upload=e.upload({url:"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,console.log("succeess"),d(function(){b.result=c.data,a.group.photo=c.data.filename,a.group.prephoto=c.data.filename,console.log(a.group.photo)})},function(b){console.log(b),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!0,a.image_gallery_selected||$("#image-gallery").imagepicker({changed:function(b,c){a.$apply(function(){a.gallery_picker=!1,console.log(c),a.group.prephoto=c[0]})}})}}]).controller("group-promote",["$scope","$state","$stateParams","$timeout","Group",function(a,b,c,d,e){a.group=new e({}),a.third_stage=!0,a.four_stage=!1,a.goToView=function(){a.third_stage=!1,a.four_stage=!0,d(function(){b.go("group-view",{groupId:a.group.id})},1e3)},a.getGroup=function(){a.group=e.get({id:c.groupId},function(a){})},a.getGroup()}]).controller("group-list",["$scope","$http","$auth","$state","GroupPaginate","api_host",function(a,b,c,d,e,f){a.groups=new e,a.doFilter=function(a){console.log(a)},a.join=function(e){c.isAuthenticated()?b.get(f+"/api/group/join/"+e).success(function(b){swal({title:"info",text:"group_join",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.view(winwin_id)}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}):d.go("signIn")},a.view=function(a){console.log("view "+a),d.go("group-view",{groupId:a})}}]).controller("group-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","Group","Post","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.edit_user={},a.is_admin=!1,a.current_view="home",a.isSponsor=!1,j.getProfile().success(function(b){b&&(a.account=b.account,a.profile=b.profile,a.sponsor=b.sponsor,a.isSponsor=b.is_sponsor)}),a.setCurrentView=function(b){a.current_view=b,a.is_admin="admin"==b},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){a.user_detail.myself&&(a.is_admin=!0)},a.getGroup=function(){a.group=h.get({id:d.groupId},function(b){a.getThread(b.id)})},a.getGroup(),a.join=function(){b.get(k+"/api/groups/join/"+a.group.id).success(function(b){a.getGroup(),swal({title:"info",text:"group_join",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.left=function(){b.get(k+"/api/groups/left/"+a.group.id).success(function(b){swal({title:"info",text:"group_left",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.addToGroup=function(c){b.get(k+"/api/groups/"+a.group.id+"/add_winwin/"+c).success(function(b){swal({title:"info",text:"winwin_added_to_group",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.removeFromGroup=function(c){b.get(k+"/api/groups/"+a.group.id+"/remove_winwin/"+c).success(function(b){swal({title:"info",text:"winwin_removed_from_group",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getGroup()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.viewSponsor=function(a){c.go("sponsor-view",{sponsorId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.viewUser=function(a){c.go("user-view",{userId:a})},a.viewGroup=function(a){c.go("group-view",{groupId:a})},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},e(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})}),a.editing_conversation=!1,a.conversation=new i({}),a.newConversation=function(){a.editing_conversation=!0},a.cancelConversation=function(){a.editing_conversation=!1},a.newReply=function(a){a.editing_reply=!0},a.cancelReply=function(a){a.editing_reply=!1},a.submitConversation=function(){console.log("submit"),b.post(k+"/api/groups/"+a.group.id+"/conversation",{content:a.conversation.content,title:a.conversation.title}).success(function(b){a.comments=b,a.conversation=new i({}),a.editing_conversation=!1}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.reply=new i({}),a.submitReply=function(c){console.log("submit"),b.post(k+"/api/groups/"+a.group.id+"/conversation/"+c.id,{content:a.reply.content}).success(function(b){a.comments=b,a.reply=new i({}),c.editing_reply=!1}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.getThread=function(c){b.get(k+"/api/group_thread/"+c).success(function(b){a.comments=b})},a.follow=function(c){b.get(k+"/api/users/follow/"+c.id).success(function(b){a.getUser(),swal({title:"info",text:"user_follow",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.unfollow=function(c){b.get(k+"/api/users/unfollow/"+c.id).success(function(b){swal({title:"info",text:"user_unfollow",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.askForSponsored=function(){swal({title:"SOLICITAR PATROCINIO",text:"Envia un mensaje de solicitud al administrador del Grupo",type:"input",showCancelButton:!0,closeOnConfirm:!0,inputPlaceholder:"Mensaje de solicitud"},function(d){return d===!1?!1:""===d?!1:(b.post("/api/groups/sponsor_request/"+a.group.id,{body:d}).success(function(b){c.go("group-sponsored",{groupId:a.group.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})}),!0)})}}]).controller("group-sponsored",["$scope","$http","$state","$stateParams","$timeout","Group",function(a,b,c,d,e,f){a.getGroup=function(){a.group=f.get({id:d.groupId},function(b){a.name=b.name,e(function(){c.go("group-view",{groupId:d.groupId})},1e3)})},a.getGroup()}]).controller("group-config",["$scope","$state","$auth","$timeout","$http","Upload","Group","Interest","api_host",function(a,b,c,d,e,f,g,h,i){a.doValidate=function(){return a.group.gallery_image=a.image_gallery_selected,!0},a.doSave=function(){a.doValidate()&&e.post(i+"/api/group/"+a.group.id,a.group).success(function(c){swal({title:"info",text:"group_updated",type:"info",showcancelbutton:!1,closeonconfirm:!0}),b.go("group-view",{groupId:a.group.id})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.uploading=!1,a.uploadFiles=function(b){console.log("uploading"),a.f=b,b&&!b.$error&&(b.upload=f.upload({url:"/api/winwins/upload",file:b}),b.upload.then(function(c){a.uploading=!1,console.log("succeess"),d(function(){b.result=c.data,a.group.photo=c.data.filename,console.log(a.group.photo)})},function(b){console.log(b),a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.gallery_picker=!1,a.select_gallery=function(){a.gallery_picker=!0,a.image_gallery_selected||$("#image-gallery").imagepicker({changed:function(b,c){c&&(a.group.photo=!1),a.$apply(function(){a.gallery_picker=!1})}})}}]),angular.module("winwinsApp").controller("sponsor-list",["$scope","$state","SponsorPaginate",function(a,b,c){a.sponsors=new c,a.view=function(a){b.go("sponsor-view",{sponsorId:a})}}]).controller("sponsor-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","Sponsor","api_host","Upload",function(a,b,c,d,e,f,g,h,i,j){a.is_admin=!1,a.current_view="home",a.setCurrentView=function(b){a.current_view=b,a.is_admin="admin"==b},a.setNormal=function(){a.is_admin=!1},a.setAdmin=function(){a.user_detail.myself&&(a.is_admin=!0)},a.edit_sponsor={},a.getSponsor=function(){a.sponsor=h.get({id:d.sponsorId},function(b){a.sponsor=b,a.edit_sponsor=b})},a.getSponsor(),a.follow=function(){b.get(i+"/api/sponsors/follow/"+a.sponsor.id).success(function(b){a.getSponsor(),swal({title:"info",text:"sponsor_join",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},a.unfollow=function(){b.get(i+"/api/sponsors/unfollow/"+a.sponsor.id).success(function(b){swal({title:"info",text:"sponsor_left",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0}),a.getSponsor()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})},a.uploading=!1,a.uploadFiles=function(b){a.f=b,b&&!b.$error&&(b.upload=j.upload({url:i+"/api/sponsor/upload",file:b}),b.upload.then(function(c){a.uploading=!1,e(function(){b.result=c.data,a.edit_sponsor.photo=c.data.filename})},function(b){a.uploading=!1,b.status>0&&(a.errorMsg=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.uploading_cover=!1,a.uploadFilesCover=function(b){a.fc=b,b&&!b.$error&&(b.upload=j.upload({url:i+"/api/sponsor/upload",file:b}),b.upload.then(function(c){a.uploading_cover=!1,e(function(){b.result=c.data,a.edit_sponsor.cover_photo=c.data.filename})},function(b){a.uploading_cover=!1,b.status>0&&(a.errorMsgCover=b.status+": "+b.data)}),b.upload.progress(function(c){a.uploading_cover=!0,b.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},a.saveProfile=function(){b.post(i+"/api/sponsor/profile",a.edit_sponsor).success(function(b){a.getSponsor(),swal({title:"info",text:"Los datos fueron actualizados",type:"info",showcancelbutton:!1,animation:!1,closeonconfirm:!0})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,closeOnConfirm:!0})})}}]),angular.module("winwinsApp").controller("user-list",["$scope","$state","$http","$auth","UserPaginate","api_host",function(a,b,c,d,e,f){a.users=new e,a.isAuthenticated=function(){return d.isAuthenticated()},a.view=function(a){b.go("user-view",{userId:a})},a.follow=function(a){c.get(f+"/api/users/follow/"+a.id).success(function(b){swal({title:"info",text:"Siguiendo!",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.following=!0,a.followers_count=a.followers_count+1}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})}}]).controller("user-view",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$rootScope","User","Post","api_host",function(a,b,c,d,e,f,g,h,i,j,k){a.comments=[],a.followers=[],a.following=[],a.getUser=function(){console.log("User id profile: "+d.userId),a.user=i.get({id:d.userId},function(b){a.user_detail=b,a.comments=b.comments,a.notifications=b.notifications,a.followers=b.followers,a.following=b.following})},a.getUser(),a.follow=function(){b.get(k+"/api/users/follow/"+a.user.id).success(function(b){a.getUser(),swal({title:"info",text:"Siguiendo!",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},a.unfollow=function(){b.get(k+"/api/users/unfollow/"+a.user.id).success(function(b){swal({title:"info",text:"Dejaste de seguir al usuario",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},a.comment=new j({}),a.submitComment=function(){console.log("submit"),b.post(k+"/api/users/"+a.user.id+"/comment",{content:a.comment.content}).success(function(b){a.comments=b,a.comment=new j({})}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},a.filter=function(b){a.current=b,$(".grid-participantes").isotope({filter:"all"==b?"*":"."+b})},e(function(){$(".grid-participantes").isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})}),a.view=function(a){c.go("user-view",{userId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.viewUser=function(a){c.go("user-view",{userId:a})},a.viewGroup=function(a){c.go("group-view",{groupId:a})}}]).controller("ProfileCtrl",["$rootScope","$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","$auth","$uibModal","Upload","User","Account","api_host",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.followers=[],b.following=[],b.comments=[],b.notifications=[],b.is_admin=!1,b.edit_user={},b.current_view="home",b.setCurrentView=function(a){b.current_view=a,b.is_admin="admin"==a},b.setNormal=function(){b.is_admin=!1},b.setAdmin=function(){b.user_detail.myself&&(b.is_admin=!0)},b.getUser=function(){m.getProfile().then(function(a){b.account=a.data,l.get({id:b.account.user.id},function(a){b.user_detail=a,b.followers=a.followers,b.following=a.following,b.comments=a.comments,b.notifications=a.notifications,b.edit_user=a,b.setup_components()})})},b.getUser(),b.follow=function(a){c.get(n+"/api/users/follow/"+a).success(function(a){b.getUser(),swal({title:"info",text:"Siguiendo!",type:"info",showcancelbutton:!1,closeonconfirm:!0})}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},b.unfollow=function(a){c.get(n+"/api/users/unfollow/"+a).success(function(a){swal({title:"info",text:"Dejaste de seguir al usuario",type:"info",showcancelbutton:!1,closeonconfirm:!0}),b.getUser()}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},b.filter=function(a){b.current=a,b.isot.isotope({filter:"all"==a?"*":"."+a})},b.view=function(a){d.go("user-view",{userId:a})},b.viewWinwin=function(a){d.go("winwin-view",{winwinId:a})},b.viewUser=function(a){console.log("view user: "+a),d.go("user-view",{userId:a})},b.viewGroup=function(a){d.go("group-view",{groupId:a})},b.$watch("following",function(){b.following.length>0&&f(function(){b.isot=angular.element(".grid-participantes"),b.isot.isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})})}),b.$watch("followers",function(){b.followers.length>0&&f(function(){b.isot=angular.element(".grid-participantes"),b.isot.isotope({itemSelector:".participante-item",masonry:{columnWidth:380}})})}),b.setup_components=function(){$("#datetimepicker1").datetimepicker({maxDate:new Date,format:"DD - MM - YYYY"}),console.log(b.edit_user.birthdate)},b.uploading=!1,b.uploadFiles=function(a){b.f=a,a&&!a.$error&&(b.uploading=!0,a.upload=k.upload({url:"/api/me/upload",file:a}),a.upload.then(function(c){b.uploading=!1,f(function(){a.result=c.data,b.edit_user.photo=c.data.filename})},function(a){b.uploading=!1,a.status>0&&(b.errorMsg=a.status+": "+a.data)}),a.upload.progress(function(c){b.uploading=!0,a.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},b.uploadFilesCover=function(a){b.fc=a,a&&!a.$error&&(b.uploading=!0,a.upload=k.upload({url:"/api/me/upload",file:a}),a.upload.then(function(c){b.uploading=!1,f(function(){a.result=c.data,b.edit_user.cover_photo=c.data.filename})},function(a){b.uploading=!1,a.status>0&&(b.errorMsgCover=a.status+": "+a.data)}),a.upload.progress(function(c){b.uploading=!0,a.progress=Math.min(100,parseInt(100*c.loaded/c.total))}))},b.saveProfile=function(){c.post(n+"/api/profile",b.edit_user).success(function(c){b.getUser(),swal({title:"info",text:"Datos actualizados!",type:"info",showcancelbutton:!1,closeonconfirm:!0}),a.profile_photo=b.edit_user.photo}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},b.setOption=function(a,c){b.edit_user[a]=c,console.log("Key: "+a+" - value: "+c),console.log("user_edit: "+b.edit_user[a])},b.cancelAccount=function(){swal({title:"Cancelar Mi Cuenta",text:"Contanos tus motivos",type:"input",showCancelButton:!0,animation:!1,closeOnConfirm:!0,inputPlaceholder:"Mensaje de solicitud"},function(a){return c.post("/api/me/cancel",{body:a}).success(function(a){d.go("cancel-account")}).error(function(a){swal({title:"Error",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})}),!0})},b.openSocialModal=function(a){b.toShare=a;j.open({animation:!1,windowTopClass:"modal-background",templateUrl:"winwinShareModal.html",controller:"ModalInstanceCtrl",resolve:{toShare:function(){return b.toShare}}})}}]).controller("cancel-account",["$scope","$rootScope","$state","$stateParams","$timeout","$auth",function(a,b,c,d,e,f){e(function(){f.logout().then(function(){b.$broadcast("is_logged",!1)})},1e3)}]).controller("ProfileNotificaciones",["$scope","$http","$state","$stateParams","$timeout","$anchorScroll","$location","User","Account","api_host",function(a,b,c,d,e,f,g,h,i,j){a.viewProfile=function(a){c.go("user-view",{userId:a})},a.viewSponsor=function(a){c.go("sponsor-view",{sponsorId:a})},a.viewWinwin=function(a){c.go("winwin-view",{winwinId:a})},a.getUser=function(){i.getProfile().then(function(b){a.account=b.data,h.get({id:a.account.user.id},function(b){a.user_detail=b})}),b.get(j+"/api/me/notificactions/read").success(function(a){})},a.getUser()}]),angular.module("winwinsApp").controller("LoginCtrl",["$scope","$rootScope","$auth","$state","$timeout",function(a,b,c,d,e){a.show_login=!0,a.redirect_message=!1,a.login=function(){c.login({email:a.email,password:a.password}).then(function(c){b.currentUser=c,b.$broadcast("is_logged",!0),a.show_login=!1,a.redirect_message=!0,e(function(){if(b.returnState)switch(b.returnState.state){case"ww-join":var a=b.returnState.parameters.winwinId;b.returnState=null,d.go("winwin-view",{winwinId:a,actionJoin:!0});break;default:d.go("main")}else d.go("main")},3e3)})["catch"](function(a){swal({title:"ADVERTENCIA",text:"El usuario y/o password son incorrectos",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0}),d.go("signIn");
})},a.authenticate=function(f){c.authenticate(f).then(function(c){b.currentUser=c,b.$broadcast("is_logged",!0),a.show_login=!1,a.provider=f,a.redirect_message=!0,e(function(){if(b.returnState)switch(b.returnState.state){case"ww-join":var a=b.returnState.parameters.winwinId;b.returnState=null,d.go("winwin-view",{winwinId:a,actionJoin:!0});break;default:d.go("main")}else d.go("main")},3e3)})["catch"](function(a){swal({title:"ADVERTENCIA",text:"Error en la autenticacin con la red social",type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0}),d.go("signin")})},a.goSignup=function(){d.go("signUp")}}]).controller("FailureLogin",["$scope","$state","$timeout",function(a,b,c){}]).controller("SuccessLogin",["$scope","$state","$timeout",function(a,b,c){c(function(){b.go("main")},1e3)}]),angular.module("winwinsApp").controller("LogoutCtrl",["$auth","$rootScope","$state",function(a,b,c){a.isAuthenticated()&&a.logout().then(function(){b.$broadcast("is_logged",!1),c.go("main")})}]),angular.module("winwinsApp").controller("MembersCtrl",["$scope","$animate",function(a,b){}]),angular.module("winwinsApp").controller("NavController",["$scope","$rootScope","$state","$location","$timeout","$auth","$window","$http","api_host","Account",function(a,b,c,d,e,f,g,h,i,j){a.unreadNotifications=0,a.profile=!1,a.is_logged=!1,a.isSponsor=!1,a.isActive=!0,a.sponsor=!1,a.$on("$stateChangeStart",function(){f.isAuthenticated()?j.getStatus().then(function(b){console.log("get status"),a.unreadNotifications=b.data.notifications_unread}):a.unreadNotifications=0}),b.$on("is_logged",function(c,d){a.is_logged=d,console.log("is logged? "+d),d?a.fetching_profile||a.profile||(a.fetching_profile=!0,j.getProfile().then(function(c){a.fetching_profile=!1,a.profile=c.data.profile,a.sponsor=c.sponsor,a.isSponsor=c.is_sponsor,a.isActive=c.data.active,a.email=c.data.user.email,b.account=a.profile,console.log("Fetching profile"),b.profile_photo=a.profile.photo,console.log(b.profile_photo)})):(b.profile_photo=!1,a.profile=!1,a.is_logged=!1,a.sponsor=!1,a.isActive=!1,a.isSponsor=!1,b.account={})}),b.$on("$stateChangeSuccess",function(a,b){jQuery(".button-collapse").sideNav("hide"),jQuery("html, body").animate({scrollTop:1},0)}),a.isAuthenticated=function(){var c=f.isAuthenticated();return a.fetching_profile||a.profile||!c||(a.fetching_profile=!0,console.log("is Authenticated"),j.getProfile().then(function(c){a.fetching_profile=!1,a.profile=c.data.profile,a.sponsor=c.data.sponsor,a.isSponsor=c.data.is_sponsor,a.isActive=c.data.active,a.email=c.data.user.email,b.profile_photo=a.profile.photo,b.$broadcast("is_logged",!0)})),c},a.fetching_profile=!1,a.getProfile=function(){return a.profile},a.do_back=function(){g.history.back()},a.goProfile=function(){console.log("go profile"),console.log("is sponsor? "+a.isSponsor),a.isSponsor?c.go("sponsor-view",{sponsorId:a.sponsor.id}):c.go("profile")},a.goNotifications=function(){c.go("profile_notificaciones")},a.resendActivationMail=function(){h.get(i+"/api/users/resend/activation").success(function(b){a.sentActivationMail=!0}).error(function(a){swal({title:"ADVERTENCIA",text:a.message,type:"warning",showCancelButton:!1,animation:!1,closeOnConfirm:!0})})},e(function(){jQuery(".button-collapse").sideNav()})}]),angular.module("birth-day",["ng"]).directive("birthDayPicker",function(){return{restrict:"A",replace:!0,required:"birthday",scope:{birthday:"=",onChange:"&"},template:'<div class="birthday-picker input-group"><input type="number" placeholder="Da" id="monthDay" ng-model="birthDay" min="1" max="31" max-lengh="2" ng-change="birthpickerchanged();" class="birth-day form-control col-xs-4 col-md-4 no-padding"/><select ng-model="birthMonth" ng-change="birthpickerchanged();" class="birth-month  form-control col-xs-4 col-md-4 no-padding"><option value="1">Enero</option><option value="2">Febrero</option><option value="3">Marzo</option><option value="4">Abril</option><option value="5">Mayo</option><option value="6">Junio</option><option value="7">Julio</option><option value="8">Agosto</option><option value="9">Septiembre</option><option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option></select><input type="number" placeholder="Ao" id="Year" ng-model="birthYear" min="1900" max-lengh="4"  max="{{maxyear();}}" ng-change="birthpickerchanged();" class="birth-year form-control col-xs-4 col-md-4 no-padding" name="birth"/></div>',link:function(a,b,c){if(null==a.birthday)a.birthMonth=(new Date).getMonth(),a.birthDay=(new Date).getDate(),a.birthYear=(new Date).getFullYear();else{var d=new Date(a.birthday);a.birthMonth=d.getMonth()+1,a.birthDay=d.getDate(),a.birthYear=d.getFullYear()}a.birthpickerchanged=function(){a.birthDay>31?a.birthDay=31:a.birthDay<=0?a.birthDay=1:void 0==a.birthDay&&(a.birthDay=31),a.birthDay>a.maxyear()&&(a.birthDay=a.maxyear());var b=new Date(a.birthYear,a.birthMonth-1,a.birthDay,0,0,0);a.birthday=b,a.onChange({data:a.birthday})},a.maxyear=function(){return(new Date).getFullYear()}}}}),angular.module("winwinsApp").directive("ensureUnique",["$http",function(a){return{require:"ngModel",link:function(a,b,c,d){a.$watch(c.ngModel,function(){})}}}]).directive("compareTo",[function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b==a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}]),angular.module("winwinsApp").directive("searchBar",["$animate","$state",function(a,b){return{restrict:"E",replace:!0,scope:{},templateUrl:"views/extras/searchBar.html",link:function(a,c,d,e){a.searchActive=!1,a.toggleSearchBar=function(){a.searchActive=!a.searchActive,a.searchActive},a.search=function(){console.dir($("#query").val()),b.go("search-list",{query:$("#query").val(),winwin:$("#search_winwin").val(),user:$("#search_user").val(),group:$("#search_group").val(),sponsor:$("#search_sponsor").val()})}}}}]),angular.module("winwinsApp").directive("ngTranslateLanguageSelect",["LocaleService",function(a){"use strict";return{restrict:"A",replace:!0,template:'<div class="dropdown language-select" ng-if="visible"><select ng-model="currentLocaleDisplayName"ng-options="localesDisplayName for localesDisplayName in localesDisplayNames"ng-change="changeLanguage(currentLocaleDisplayName)"></select></div>',controller:["$scope",function(b){b.currentLocaleDisplayName=a.getLocaleDisplayName(),b.localesDisplayNames=a.getLocalesDisplayNames(),b.visible=b.localesDisplayNames&&b.localesDisplayNames.length>1,b.changeLanguage=function(b){a.setLocaleByDisplayName(b)}}]}}]),angular.module("truncate",[]).filter("characters",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+""}return a}}).filter("splitcharacters",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){var c=a.substring(0,b/2),d=a.substring(a.length-b/2,a.length);return c+"..."+d}return a}}).filter("words",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a){var c=a.split(/\s+/);c.length>b&&(a=c.slice(0,b).join(" ")+"")}return a}}),angular.module("truncate",[]).filter("moment",function(){return function(a,b){return moment(a).format(b)}}),angular.module("winwinsApp").factory("Group",["$resource","api_host",function(a,b){return a(b+"/api/groups/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Poll",["$resource","api_host",function(a,b){return a(b+"/api/polls/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Sponsor",["$resource","api_host",function(a,b){return a(b+"/api/sponsors/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Story",["$resource","api_host",function(a,b){return a(b+"/api/stories/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Account",["$http","api_host",function(a,b){return{getProfile:function(){return console.log("get profile"),a.get(b+"/api/me")},getStatus:function(){return a.get(b+"/api/me/status")},updateProfile:function(c){return a.put(b+"/api/me",c)}}}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Winwin",["$resource","api_host",function(a,b){return a(b+"/api/winwins/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Post",["$resource","api_host",function(a,b){return a(b+"/api/posts/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Comment",["$resource","api_host",function(a,b){return a(b+"/api/comments/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("ActivityType",["$resource","api_host",function(a,b){return a(b+"/api/parametric/activities/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Interest",["$resource","api_host",function(a,b){return a(b+"/api/parametric/interests/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Marital",["$resource","api_host",function(a,b){return a(b+"/api/parametric/marital/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("Language",["$resource","api_host",function(a,b){return a(b+"/api/parametric/languages/:id",{id:"@id"},{update:{method:"POST"}})}]).factory("TokenService",["$http","api_host",function(a,b){function c(){return a.get(b+"/auth/token").then(d,e)}function d(a){return a}function e(a){return a}return{get:c}}]).factory("WinwinPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.filter="all",this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/winwins/paginate/"+(this.current_page||"0")+"/15/"+this.filter).success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c.prototype.setFilter=function(a){this.filter=a,this.items=[],this.busy=!1,this.current_page=0},c}]).factory("GroupPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/groups/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]).factory("UserPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/users/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]).factory("SponsorPaginate",["$http","api_host",function(a,b){var c=function(){this.items=[],this.busy=!1,this.current_page=0};return c.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var c=this;a.get(b+"/api/sponsors/paginate/"+(this.current_page||"0")+"/15").success(function(a){c.current_page=c.current_page+1;for(var b=0;b<a.length;b++)c.items.push(a[b]);c.busy=!1})}},c}]),angular.module("winwinsApp").service("LocaleService",["$translate","LOCALES","$rootScope","tmhDynamicLocale",function(a,b,c,d){"use strict";var e=b.locales,f=Object.keys(e);f&&0!==f.length||console.error("There are no _LOCALES provided");var g=[];f.forEach(function(a){g.push(e[a])});var h=a.proposedLanguage(),i=function(a){return-1!==f.indexOf(a)},j=function(b){return i(b)?(h=b,void a.use(b)):void console.error('Locale name "'+b+'" is invalid')};return c.$on("$translateChangeSuccess",function(a,b){document.documentElement.setAttribute("lang",b.language),d.set(b.language.toLowerCase().replace(/_/g,"-"))}),{getLocaleDisplayName:function(){return e[h]},setLocaleByDisplayName:function(a){j(f[g.indexOf(a)])},getLocalesDisplayNames:function(){return g}}}]),window.Modernizr=function(a,b,c){function d(a){t.cssText=a}function e(a,b){return d(x.join(a+";")+(b||""))}function f(a,b){return typeof a===b}function g(a,b){return!!~(""+a).indexOf(b)}function h(a,b){for(var d in a){var e=a[d];if(!g(e,"-")&&t[e]!==c)return"pfx"==b?e:!0}return!1}function i(a,b,d){for(var e in a){var g=b[a[e]];if(g!==c)return d===!1?a[e]:f(g,"function")?g.bind(d||b):g}return!1}function j(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+z.join(d+" ")+d).split(" ");return f(b,"string")||f(b,"undefined")?h(e,b):(e=(a+" "+A.join(d+" ")+d).split(" "),i(e,b,c))}function k(){o.input=function(c){for(var d=0,e=c.length;e>d;d++)E[c[d]]=c[d]in u;return E.list&&(E.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),o.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)u.setAttribute("type",e=a[g]),d="text"!==u.type,d&&(u.value=v,u.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&u.style.WebkitAppearance!==c?(q.appendChild(u),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(u,null).WebkitAppearance&&0!==u.offsetHeight,q.removeChild(u)):/^(search|tel)$/.test(e)||(d=/^(url|email)$/.test(e)?u.checkValidity&&u.checkValidity()===!1:u.value!=v)),D[a[g]]=!!d;return D}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,m,n="2.8.3",o={},p=!0,q=b.documentElement,r="modernizr",s=b.createElement(r),t=s.style,u=b.createElement("input"),v=":)",w={}.toString,x=" -webkit- -moz- -o- -ms- ".split(" "),y="Webkit Moz O ms",z=y.split(" "),A=y.toLowerCase().split(" "),B={svg:"http://www.w3.org/2000/svg"},C={},D={},E={},F=[],G=F.slice,H=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:r+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',r,'">',a,"</style>"].join(""),j.id=r,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=q.style.overflow,q.style.overflow="hidden",q.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),q.style.overflow=i),!!g},I=function(){function a(a,e){e=e||b.createElement(d[a]||"div"),a="on"+a;var g=a in e;return g||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(a,""),g=f(e[a],"function"),f(e[a],"undefined")||(e[a]=c),e.removeAttribute(a))),e=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),J={}.hasOwnProperty;m=f(J,"undefined")||f(J.call,"undefined")?function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")}:function(a,b){return J.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=G.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(G.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(G.call(arguments)))};return d}),C.flexbox=function(){return j("flexWrap")},C.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},C.canvastext=function(){return!!o.canvas&&!!f(b.createElement("canvas").getContext("2d").fillText,"function")},C.webgl=function(){return!!a.WebGLRenderingContext},C.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:H(["@media (",x.join("touch-enabled),("),r,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},C.geolocation=function(){return"geolocation"in navigator},C.postmessage=function(){return!!a.postMessage},C.websqldatabase=function(){return!!a.openDatabase},C.indexedDB=function(){return!!j("indexedDB",a)},C.hashchange=function(){return I("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},C.history=function(){return!!a.history&&!!history.pushState},C.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},C.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},C.rgba=function(){return d("background-color:rgba(150,255,150,.5)"),g(t.backgroundColor,"rgba")},C.hsla=function(){return d("background-color:hsla(120,40%,100%,.5)"),g(t.backgroundColor,"rgba")||g(t.backgroundColor,"hsla")},C.multiplebgs=function(){return d("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(t.background)},C.backgroundsize=function(){return j("backgroundSize")},C.borderimage=function(){return j("borderImage")},C.borderradius=function(){return j("borderRadius")},C.boxshadow=function(){return j("boxShadow")},C.textshadow=function(){return""===b.createElement("div").style.textShadow},C.opacity=function(){return e("opacity:.55"),/^0.55$/.test(t.opacity)},C.cssanimations=function(){return j("animationName")},C.csscolumns=function(){return j("columnCount")},C.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return d((a+"-webkit- ".split(" ").join(b+a)+x.join(c+a)).slice(0,-a.length)),g(t.backgroundImage,"gradient")},C.cssreflections=function(){return j("boxReflect")},C.csstransforms=function(){return!!j("transform")},C.csstransforms3d=function(){var a=!!j("perspective");return a&&"webkitPerspective"in q.style&&H("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a},C.csstransitions=function(){return j("transition")},C.fontface=function(){var a;return H('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])}),a},C.generatedcontent=function(){var a;return H(["#",r,"{font:0/0 a}#",r,':after{content:"',v,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},C.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},C.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},C.localstorage=function(){try{return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch(a){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(r,r),sessionStorage.removeItem(r),!0}catch(a){return!1}},C.webworkers=function(){return!!a.Worker},C.applicationcache=function(){return!!a.applicationCache},C.svg=function(){return!!b.createElementNS&&!!b.createElementNS(B.svg,"svg").createSVGRect},C.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==B.svg},C.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(w.call(b.createElementNS(B.svg,"animate")))},C.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(w.call(b.createElementNS(B.svg,"clipPath")))};for(var K in C)m(C,K)&&(l=K.toLowerCase(),o[l]=C[K](),F.push((o[l]?"":"no-")+l));return o.input||k(),o.addTest=function(a,b){if("object"==typeof a)for(var d in a)m(a,d)&&o.addTest(d,a[d]);else{if(a=a.toLowerCase(),o[a]!==c)return o;b="function"==typeof b?b():b,"undefined"!=typeof p&&p&&(q.className+=" "+(b?"":"no-")+a),o[a]=b}return o},d(""),s=u=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=r[a[p]];return b||(b={},q++,a[p]=q,r[q]=b),b}function f(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=e(c));var f;return f=d.cache[a]?d.cache[a].cloneNode():o.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!f.canHaveChildren||n.test(a)||f.tagUrn?f:d.frag.appendChild(f)}function g(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||e(a);for(var f=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)f.createElement(h[g]);return f}function h(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?f(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function i(a){a||(a=b);var d=e(a);return s.shivCSS&&!j&&!d.hasCSS&&(d.hasCSS=!!c(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||h(a,d),a}var j,k,l="3.7.0",m=a.html5||{},n=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",q=0,r={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",j="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){j=!0,k=!0}}();var s={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:l,shivCSS:m.shivCSS!==!1,supportsUnknownElements:k,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:i,createElement:f,createDocumentFragment:g};a.html5=s,i(b)}(this,b),o._version=n,o._prefixes=x,o._domPrefixes=A,o._cssomPrefixes=z,o.hasEvent=I,o.testProp=function(a){return h([a])},o.testAllProps=j,o.testStyles=H,o.prefixed=function(a,b,c){return b?j(a,b,c):j(a,"pfx")},q.className=q.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+F.join(" "):""),o}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};